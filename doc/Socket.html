<!-- -*-HTML-*- -->
<!-- $Id: Socket.html,v 1.4 2002/12/15 00:03:02 markus Exp $ -->

<html>
  <head>
    <title>General Reference: Socket</title>
    <meta name="description" content="Documentation of Socket-class">
    <meta name="keywords" content="Documentation, Docu, Socket, class">

    <meta name="DC.Creator" content="Markus Schwab">
    <meta name="DC.Date" content="2001-10-19">
    <meta name="DC.Rights" content="Anticopyright (A) 2001, distributed under the GNU General Public License">
  </head>

  <body bgcolor="#F0F0F0" text="#000000" link="#0000FF" vlink="#000077" alink="#FF0000">
    <table align=center border=0 cellspacing=10>
      <tr><td><a href="index.html">Class Index</a></td>
      <td><a href="cross_index.html">Cross Index</a></td></tr>
    </table>

    <h1 align="center">Class Socket</h1>
    <p>Derived from
      <i>none</i>
      <br>
      Derived by: <i>none</i></p>

    <p>#include &lt;Socket.h&gt;</p>

    <hr noshade>
    <h2>Description</h2>

    <p>A <i>socket</i> is a generalized interprocess communication
      channel, which supports communication between unrelated processes,
      and even between processes running on different machines that
      communicate over a network. This class provides methods to connect
      to, read from and write to another socket.</p>

    <p>At the moment the communications are always handled using
      streamed connections in the Internet namespace.</p>

    <hr noshade>
    <table border="0">
      <tr><td colspan="3"><h3>public function member index</h3></td></tr>
      <tr valign="top"><td><tt></tt> </td>
        <td><a href="Socket.html#Socket"><b>Socket</b></a></td>
        <td><tt>() throw (<span style="color:navy">domain_error</span>)</tt>;</td></tr>
      <tr valign="top"><td><tt></tt> </td>
        <td><a href="Socket.html#Socket2"><b>Socket</b></a></td>
        <td><tt>(<tt><span style="color:purple">int</span></tt> <tt><span style="color:blue">other</span></tt>)</tt>;</td></tr>
      <tr valign="top"><td><tt></tt> </td>
        <td><a href="Socket.html#Socket3"><b>Socket</b></a></td>
        <td><tt>(<span style="color:navy">unsigned</span> <span style="color:purple">int</span> <span style="color:blue">port</span>) throw (<span style="color:navy">domain_error</span>)</tt>;</td></tr>
      <tr valign="top"><td><tt></tt> </td>
        <td><a href="Socket.html#Socket4"><b>Socket</b></a></td>
        <td><tt>(const <span style="color:purple">char</span>* <span style="color:blue">server</span>, <span style="color:navy">unsigned</span> <span style="color:purple">int</span> <span style="color:blue">port</span>) throw (<span style="color:navy">domain_error</span>)</tt>;</td></tr>
      <tr valign="top"><td><tt></tt> </td>
        <td><a href="Socket.html#Socket5"><b>Socket</b></a></td>
        <td><tt>(const <span style="color:purple">std::string</span>&amp; <span style="color:blue">server</span>, <span style="color:navy">unsigned</span> <span style="color:purple">int</span> <span style="color:blue">port</span>) throw (<span style="color:navy">domain_error</span>)</tt>;</td></tr>
      <tr valign="top"><td><tt></tt> </td>
        <td><a href="Socket.html#Socket6"><b>Socket</b></a></td>
        <td><tt>(<tt>const</tt> <a href="Socket.html#Socket"><b>Socket</b></a>&amp; <tt><span style="color:blue">other</span></tt>)</tt>;</td></tr>

      <tr valign="top"><td><tt>static <span style="color:navy">unsigned</span> <span style="color:purple">int</span></tt></td>
        <td><a href="Socket.html#getPortOfService"><b>getPortOfService</b></a></td>
        <td><tt>(const <span style="color:purple">char</span>* <span style="color:blue">service</span>) throw (<span style="color:navy">domain_error</span>)</tt>;</td></tr>

      <tr valign="top"><td><tt><span style="color:purple">void</span></tt></td>
        <td><a href="Socket.html#listenAt"><b>listenAt</b></a></td>
        <td><tt>(<span style="color:navy">unsigned</span> <span style="color:purple">int</span> <span style="color:blue">port</span>) const throw (<span style="color:navy">domain_error</span>)</tt>;</td></tr>

      <tr valign="top"><td><tt><tt><span style="color:purple">int</span></tt></tt> </td>
        <td><a href="Socket.html#number"><b>number</b></a></td>
        <td><tt>() <tt>const</tt></tt>;</td></tr>

      <tr valign="top"><td> </td>
        <td><a href="Socket.html#operatorint"><b><span style="color:black">operator</span> int</b></a></td>
        <td><tt>() <tt>const</tt></tt>;</td></tr>
      <tr valign="top"><td><tt><a href="Socket.html#Socket"><b>Socket</b></a>&amp;</tt> </td>
        <td><a href="Socket.html#operator="><tt><span style="color:black"><b>operator</b></span>=</tt></a></td>
        <td><tt>(const <a href="Socket.html"><b>Socket</b></a>&amp; <span style="color:blue">other</span>) throw (<span style="color:navy">domain_error</span>)</tt>;</td></tr>
      <tr valign="top"><td><tt><a href="Socket.html#Socket"><b>Socket</b></a>&amp;</tt> </td>
        <td><a href="Socket.html#operator=2"><tt><span style="color:black"><b>operator</b></span>=</tt></a></td>
        <td><tt>(<tt><span style="color:purple">int</span></tt> <tt><span style="color:blue">socket</span></tt>)</tt>;</td></tr>

      <tr valign="top"><td><tt><span style="color:purple">int</span></tt></td>
        <td><a href="Socket.html#read"><b>read</b></a></td>
        <td><tt>(<a href="AByteArray"><b>AByteArray</b></a>&amp; <span style="color:blue">input</span>) const throw (<span style="color:navy">domain_error</span>)</tt>;</td></tr>
      <tr valign="top"><td><tt><span style="color:purple">int</span></tt></td>
        <td><a href="Socket.html#read2"><b>read</b></a></td>
        <td><tt>(<span style="color:purple">char</span>* <span style="color:blue">pBuffer</span>, <span style="color:purple">int</span> <span style="color:blue">lenBuffer</span>) const throw (<span style="color:navy">domain_error</span>)</tt>;</td></tr>
      <tr valign="top"><td><tt><span style="color:purple">int</span></tt></td>
        <td><a href="Socket.html#read3"><b>read</b></a></td>
        <td><tt>(<span style="color:purple">std::string</span>&amp; <span style="color:blue">input</span>) const throw (<span style="color:navy">domain_error</span>)</tt>;</td></tr>

      <tr valign="top"><td><tt><span style="color:purple">int</span></tt></td>
        <td><a href="Socket.html#waitForInput"><b>waitForInput</b></a></td>
        <td><tt>() const throw (<span style="color:navy">domain_error</span>)</tt>;</td></tr>

      <tr valign="top"><td><tt><span style="color:purple">void</span></tt></td>
        <td><a href="Socket.html#write"><b>write</b></a></td>
        <td><tt>(const <span style="color:purple">char</span>* <span style="color:blue">pBuffer</span>) const throw (<span style="color:navy">domain_error</span>)</tt>;</td></tr>
      <tr valign="top"><td><tt><span style="color:purple">void</span></tt></td>
        <td><a href="Socket.html#write2"><b>write</b></a></td>
        <td><tt>(const <span style="color:purple">char</span>* <span style="color:blue">pBuffer</span>, <span style="color:navy">unsigned</span> <span style="color:purple">int</span> <span style="color:blue">lenBuffer</span>) const throw (<span style="color:navy">domain_error</span>)</tt>;</td></tr>
      <tr valign="top"><td><tt><span style="color:purple">void</span></tt></td>
        <td><a href="Socket.html#write3"><b>write</b></a></td>
        <td><tt>(<a href="AByteArray"><b>AByteArray</b></a>&amp; <span style="color:blue">output</span>) const throw (<span style="color:navy">domain_error</span>)</tt>;</td></tr>
      <tr valign="top"><td><tt><span style="color:purple">void</span></tt></td>
        <td><a href="Socket.html#write4"><b>write</b></a></td>
        <td><tt>(<span style="color:purple">std::string</span>&amp; <span style="color:blue">output</span>) const throw (<span style="color:navy">domain_error</span>)</tt>;</td></tr>

      <tr valign="top"><td><tt><span style="color:purple">void</span></tt></td>
        <td><a href="Socket.html#writeTo"><b>writeTo</b></a></td>
        <td><tt>(const <span style="color:purple">char</span>* <span style="color:blue">server</span>, <span style="color:navy">unsigned</span> <span style="color:purple">int</span> <span style="color:blue">port</span>) throw (<span style="color:navy">domain_error</span>)</tt>;</td></tr>
      <tr valign="top"><td><tt><span style="color:purple">void</span></tt></td>
        <td><a href="Socket.html#writeTo2"><b>writeTo</b></a></td>
        <td><tt>(const <span style="color:purple">std::string</span>&amp; <span style="color:blue">server</span>, <span style="color:navy">unsigned</span> <span style="color:purple">int</span> <span style="color:blue">port</span>) throw (<span style="color:navy">domain_error</span>)</tt>;</td></tr>

      <tr valign="top"><td><tt><tt>virtual</tt> </tt> </td>
        <td><a href="Socket.html#~Socket"><b>~Socket</b></a></td>
        <td><tt>()</tt>;</td></tr>
      <tr><td>&nbsp;</td></tr>
      <tr><td colspan="3"><h3>public function member index</h3></td></tr>
      <tr valign="top"><td><tt>static</tt> <tt><span style="color:purple">void</span></tt></td>
        <td><a href="Socket.html#throwError"><b>throwError</b></a></td>
        <td><tt>(const <span style="color:purple">std::string</span>&amp; <span style="color:blue">error</span>, <span style="color:purple">int</span> <span style="color:blue">errNum</span>) throw (<span style="color:navy">domain_error</span>)</tt>;</td></tr>
    </table>

    <hr noshade>
    <h2>Member descriptions</h2>

    <h3 style="color:navy">Management functions</h3>
    <pre><a name="Socket"></a> <b>Socket</b> () throw (std::domain_error)</pre>
    <dl>
      <dd><p>Defaultconstructor; creates an socket but without any connection.</p></dd>
      <dd><dl><dt><b>Throws</b></dt>
          <dd>std::domain_error in case of a communication error<dd>
      </dl><dd>
    </dl>
    <hr>
    <pre><a name="Socket2"></a><b>Socket</b> (int socket)</pre>
    <dl>
      <dd><p>Constructor; creates an socket out of an existing system-socket.</p></dd>
      <dd><dl><dt><b>Parameters</b></dt>
          <dd><code>socket</code>: System socket to use for the communication<dd>
      </dl><dd>
    </dl>
    <hr>
    <pre><a name="Socket3"></a> <b>Socket</b> (unsigned int port) throw (std::domain_error)</pre>
    <dl>
      <dd><p>Constructor; creates an socket which waits for input on <code>port</code>.</p></dd>
      <dd><dl><dt><b>Parameters</b></dt>
          <dd><code>port</code>: Port to listen at<dd>
      </dl><dd>
      <dd><dl><dt><b>Throws</b></dt>
          <dd>std::domain_error in case of a communication error</dd></dl></dd>
    </dl>
    <hr>
    <pre><a name="Socket4"></a> <b>Socket</b> (const char* server, unsigned int port) throw (std::domain_error)</pre>
    <dl>
      <dd><p>Constructor; creates an socket which tries to write to
        <code>server</code> using the passed <code>port</code>.</p></dd>
      <dd><dl><dt><b>Parameters</b></dt>
          <dd><code>server</code>: Name (or number) of server to send to<dd>
          <dd><code>port</code>: Port to write to<dd>
      </dl><dd>
      <dd><dl><dt><b>Throws</b></dt>
          <dd>std::domain_error in case of a communication error</dd></dl></dd>
    </dl>
    <hr>
    <pre><a name="Socket5"></a> <b>Socket</b> (const std::string&amp; server, unsigned int port) throw (std::domain_error)</pre>
    <dl>
      <dd><p>Constructor; creates an socket which tries to write to
        <code>server</code> using the passed <code>port</code>.</p></dd>
      <dd><dl><dt><b>Parameters</b></dt>
          <dd><code>server</code>: Name (or number) of server to send to<dd>
          <dd><code>port</code>: Port to write to<dd>
      </dl><dd>
      <dd><dl><dt><b>Throws</b></dt>
          <dd>std::domain_error in case of a communication error</dd></dl></dd>
    </dl>
    <hr>
    <pre><a name="Socket6"></a><b>Socket</b> (const Socket&amp; other) throw (domain_error)</pre>
    <dl>
      <dd><p>Copy-constructor; duplicates a socket.</p></dd>
      <dd><dl><dt><b>Parameters</b></dt>
          <dd><code>rhs</code>: Socket to duplicate<dd>
      </dl><dd>
      <dd><dl><dt><b>Throws</b></dt>
          <dd>std::domain_error in case of a communication error</dd></dl></dd>
    </dl>
    <hr>
    <pre><a name="~Socket"></a> <b>~Socket</b> ()</pre>
    <dl>
      <dd><p>Destructor</p></dd>
    </dl>
    <hr>
    <pre><a name="operator="></a>Socket&amp; <b>operator=</b> (const Socket&amp; rhs) throw (std::domain_error)</pre>
    <dl>
      <dd><p>Assignment-operator; duplicates a socket. The old socket is closed.</p></dd>
      <dd><dl><dt><b>Parameters</b></dt>
          <dd><code>rhs</code>: Socket to duplicate<dd>
      </dl><dd>
      <dd><dl><dt><b>Returns</b></dt>
          <dd>Socket&amp;: Reference to self</dd></dl></dd>
      <dd><dl><dt><b>Throws</b></dt>
          <dd>std::domain_error in case of a communication error</dd></dl></dd>
    </dl>
    <hr>
    <pre><a name="operator=2"></a>Socket&amp; <b>operator=</b> (int socket)</pre>
    <dl>
      <dd><p>Assignmentoperator; creates an socket out of a system-socket.</p></dd>
      <dd><dl><dt><b>Parameters</b></dt>
          <dd><code>rhs</code>: Socket to assign<dd>
      </dl><dd>
      <dd><dl><dt><b>Returns</b></dt>
          <dd>Socket&amp;: Reference to self</dd></dl></dd>
    </dl>
    <hr>
    <pre><a name="operatorint"></a><b>operator int</b> () const</pre>
    <dl>
      <dd><p>Converts between Socket-class and system-socket (represented by an integer).</p></dd>
      <dd><dl><dt><b>Returns</b></dt>
          <dd>int: System socket</dd></dl></dd>
    </dl>
    <hr>
    <pre><a name="number"></a>int <b>number</b> () const</pre>
    <dl>
      <dd><p>Converts between Socket-class and system-socket (represented by an integer).</p></dd>
      <dd><dl><dt><b>Returns</b></dt>
          <dd>int: System socket</dd></dl></dd>
    </dl>
    <hr>
    <pre><a name="getPortOfService"></a>unsigned int <b>getPortOfService</b> (const char* service) throw (std::domain_error)</pre>
    <dl>
      <dd><p>Retrieves the port-number of the passed textual port-description
        (service name or number as text).</p></dd>
      <dd><dl><dt><b>Parameters</b></dt>
          <dd><code>service</code>: Text describing port<dd>
      </dl><dd>
      <dd><dl><dt><b>Throws</b></dt>
          <dd>std::domain_error in case of an invalid input</dd></dl></dd>
    </dl>
    <hr>
    <pre><a name="throwError"></a>void <b>throwError</b> (const std::string&amp; error, int errNum) throw (std::domain_error)</pre>
    <dl>
      <dd><p>Throws a domain_error with an explaining text.</p></dd>
      <dd><dl><dt><b>Parameters</b></dt>
          <dd><code>error</code>: Text describing the error<dd>
          <dd><code>errNum</code>: Number of error; if !=0 an explaining text is appended<dd>
      </dl><dd>
      <dd><dl><dt><b>Throws</b></dt>
          <dd>std::domain_error in case of a communication <code>error</code></dd></dl></dd>
    </dl>

    <h3 style="color:navy">Communication functions</h3>
    <pre><a name="listenAt"></a>void <b>listenAt</b> (unsigned int port) const throw (std::domain_error)</pre>
    <dl>
      <dd><p>Specifies the port to listen at (for incoming connections).</p></dd>
      <dd><dl><dt><b>Parameters</b></dt>
          <dd><code>port</code>: Port at which to listen<dd>
      </dl><dd>
      <dd><dl><dt><b>Throws</b></dt>
          <dd>std::domain_error in case of a communication error</dd></dl></dd>
    </dl>
    <hr>
    <pre><a name="waitForInput"></a>int <b>waitForInput</b> () const throw (std::domain_error)</pre>
    <dl>
      <dd><p>Waits until someone wants to create a (new) connection using
        the previously specified port.</p>

      <p>The new (system-)socket for this communication is returned.</p>

      <p><b>Technical note</b>: If a new connection is opened to a Socket,
        it is actually "duplicated" and returned to enable multiple
	connections to one port (socket)"</p></dd>
      <dd><dl><dt><b>Returns</b></dt>
          <dd>int: Socket over which to communicate</dd></dl></dd>
      <dd><dl><dt><b>Throws</b></dt>
          <dd>std::domain_error in case of a communication error</dd></dl></dd>
    </dl>
    <hr>

    <pre><a name="writeTo"></a>void <b>writeTo</b> (const char* server, unsigned int port) const throw (std::domain_error)</pre>
    <dl>
      <dd><p>Specifies the server and port to write to (for outgoing connections).</p></dd>
      <dd><dl><dt><b>Parameters</b></dt>
          <dd><code>server</code>: Name (or number) of the server to connect to<dd>
          <dd><code>port</code>: Portnumber to connect to<dd>
      </dl><dd>
      <dd><dl><dt><b>Requires</b></dt>
          <dd><code>server</code> not NULL</dd></dl></dd>
      <dd><dl><dt><b>Throws</b></dt>
          <dd>std::domain_error in case of a communication error</dd></dl></dd>
    </dl>
    <hr>
    <pre><a name="writeTo2"></a>void <b>writeTo</b> (const std::string&amp; server, unsigned int port) throw (domain_error)</pre>
    <dl>
      <dd><p>Specifies the server and port to write to (for outgoing connections).</p></dd>
      <dd><dl><dt><b>Parameters</b></dt>
          <dd><code>server</code>: Name (or number) of the server to connect to<dd>
          <dd><code>port</code>: Portnumber to connect to<dd>
      </dl><dd>
      <dd><dl><dt><b>Throws</b></dt>
          <dd>std::domain_error in case of a communication error</dd></dl></dd>
    </dl>
    <hr>

    <pre><a name="read"></a>int <b>read</b> (<a href="AByteArray"><b>AByteArray</b></a>&amp; input) const throw (domain_error)</pre>
    <dl>
      <dd><p>Reads (all available) data into <i>input</i> from the
          previously specified source.</p>

        <p>To enable the handling of multiple connections data must
          be read from a "duplicate" of the original server-socket (which
	  was retrieved by the
          <a href="waitForInput"><b>waitForInput</b></a>-method).</p></dd>
    </dl>
    <hr>
    <pre><a name="read"></a>int <b>read</b> (AByteArray&amp; input) const throw (std::domain_error)</pre>
    <dl>
      <dd><p>Reads all available data into the buffer specified by <code>input</code>
        from the previously specified source.</p></dd>
      <dd><dl><dt><b>Parameters</b></dt>
          <dd><code>input</code>: AByteArray receiving the input<dd>
      </dl><dd>
      <dd><dl><dt><b>Returns</b></dt>
          <dd>int: Number of bytes read
</dd></dl></dd>
      <dd><dl><dt><b>Throws</b></dt>
          <dd>std::domain_error in case of a communication error</dd></dl></dd>
    </dl>
    <hr>
    <pre><a name="read2"></a>int <b>read</b> (char* pBuffer, unsigned int lenBuffer) const throw (std::domain_error)</pre>
    <dl>
      <dd><p>Reads up to <code>lenBuffer</code> bytes data into the buffer specified by
          <code>pBuffer</code> from the previously specified source.</p></dd>
      <dd><dl><dt><b>Parameters</b></dt>
          <dd><code>pBuffer</code>: Pointer to buffer receiving the input<dd>
          <dd><code>lenBuffer</code>: Length of that buffer<dd>
      </dl><dd>
      <dd><dl><dt><b>Returns</b></dt>
          <dd>int: Number of bytes read</dd></dl></dd>
      <dd><dl><dt><b>Throws</b></dt>
          <dd>std::domain_error in case of a communication error</dd></dl></dd>
    </dl>
    <hr>
    <pre><a name="read3"></a>int <b>read</b> (std::string&amp; input) const throw (std::domain_error)</pre>
    <dl>
      <dd><p>Reads all available data into the buffer specified by <code>input</code>
        from the previously specified source.</p></dd>
      <dd><dl><dt><b>Parameters</b></dt>
          <dd><code>input</code>: string receiving the input<dd>
      </dl><dd>
      <dd><dl><dt><b>Returns</b></dt>
          <dd>int: Number of bytes read
</dd></dl></dd>
      <dd><dl><dt><b>Throws</b></dt>
          <dd>std::domain_error in case of a communication error</dd></dl></dd>
    </dl>
    <hr>

    <pre><a name="write"></a>void <b>write</b> (const char* pBuffer) const throw (std::domain_error)</pre>
    <dl>
      <dd><p>Writes the contents of <code>pBuffer</code> up to the first
      zero-byte to the socket (which must have been connected to an address).</p></dd>
      <dd><dl><dt><b>Parameters</b></dt>
          <dd><code>pBuffer</code>: Buffer to write<dd>
      </dl><dd>
      <dd><dl><dt><b>Requires</b></dt>
          <dd><code>pBuffer</code> not NULL</dd></dl></dd>
      <dd><dl><dt><b>Throws</b></dt>
          <dd>std::domain_error in case of a communication error</dd></dl></dd>
    </dl>
    <hr>
      <dd></dd>
    </dl>
    <pre><a name="write2"></a>void <b>write</b> (const char* pBuffer, unsigned int lenBuffer) const throw (std::domain_error)</pre>
    <dl>
      <dd><p>Writes <code>lenBuff</code> bytes of the buffer pointed to by <code>pBuffer</code>
      to the socket (which must have been connected to an address).</p></dd>
      <dd><p>Writes a buffer to a socket</p></dd>
      <dd><dl><dt><b>Parameters</b></dt>
          <dd><code>pBuffer</code>: Buffer to write<dd>
          <dd><code>lenBuffer</code>: Length of data to write<dd>
      </dl><dd>
      <dd><dl><dt><b>Requires</b></dt>
          <dd><code>pBuffer</code> not NULL</dd></dl></dd>
      <dd><dl><dt><b>Throws</b></dt>
          <dd>std::domain_error in case of a communication error</dd></dl></dd>
    </dl>
    <hr>
    <pre><a name="write3"></a>void <b>write</b> (<a href="AByteArray"><b>AByteArray</b></a>&amp; output) const throw (domain_error)</pre>
    <dl>
      <dd><p>Writes the content of <code>output</code>
      to the socket (which must have been connected to an address).</p></dd>
      <dd><dl><dt><b>Parameters</b></dt>
          <dd><code>output</code>: Content to write<dd>
      </dl><dd>
      <dd><dl><dt><b>Throws</b></dt>
          <dd>std::domain_error in case of a communication error</dd></dl></dd>
    </dl>
    <hr>
    <pre><a name="write4"></a>void <b>write</b> (std::string&amp; output) const throw (domain_error)</pre>
    <dl>
      <dd><p>Writes the content of <code>output</code>
      to the socket (which must have been connected to an address).</p></dd>
      <dd><dl><dt><b>Parameters</b></dt>
          <dd><code>output</code>: String to write<dd>
      </dl><dd>
      <dd><dl><dt><b>Throws</b></dt>
          <dd>std::domain_error in case of a communication error</dd></dl></dd>
    </dl>
  </body>
</html>
