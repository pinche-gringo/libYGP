<!-- $Id: ADate.html,v 1.5 2000/04/02 14:25:40 Markus Exp $ -->

<html>
  <head>
    <title>General Reference: ADate</title>
  </head>

  <body>
    <table align="center" border="0" cellspacing="10">
      <tr><td><a href="index.html">Class Index</a></td></tr>
    </table>

    <h1 align="center">Class ADate </h1>
    <p>Derived from: <a href="AttrVal.html">AttributValue</a></p>

    <p>Header-file: ADate.h</p>

    <hr noshade="noshade">
    <h2>Description</h2>
    <p>Class for date attributes. As every AttributValue is supports undefined
      values.</p>

    <hr noshade="noshade">
    <table border="0">
      <tr valign="top"><td colspan="3"><h3>public member index</h3></td></tr>
      <tr valign="top"><td></td><td><a href="ADate.html#ADate">ADate</a></td><td>()</td></tr>
      <tr valign="top"><td></td><td><a href="ADate.html#ADate2">ADate</a></td>
	<td>(bool now)</td></tr>
      <tr valign="top"><td></td><td><a href="ADate.html#ADate3">ADate</a></td>
	<td>(const <a href="ADate.html">ADate</a>&amp; other)</td></tr>
      <tr valign="top"><td></td><td><a href="ADate.html#ADate4">ADate</a></td>
	<td>(char Day, char Month, int Year)</td></tr>
      <tr valign="top"><td></td><td><a href="ADate.html#ADate5">ADate</a></td>
	<td>(const char* pDate)</td></tr>
      <tr valign="top"><td></td><td><a href="ADate.html#ADate6">ADate</a></td>
	<td>(const std::string&amp; date)</td></tr>
      <tr valign="top"><td></td><td><a href="ADate.html#ADate7">ADate</a></td>
	<td>(const struct tm&amp; tm)</td></tr>
      <tr valign="top"><td></td><td><a href="ADate.html#ADate8">ADate</a></td>
	<td>(const time_t date)</td></tr>
      <tr valign="top"><td>virtual</td><td><a href="ADate.html#~ADate">~ADate</a></td><td>()</td></tr>

      <tr valign="top"><td><a href="ADate.html">ADate&amp;</a></td>
	<td><a href="ADate.html#operator=">operator=</a></td>
	<td>(const <a href="ADate.html">ADate</a>&amp; other)</td></tr>
      <tr valign="top"><td><a href="ADate.html">ADate</a>&amp;</td>
	<td><a href="ADate.html#operator=2">operator=</a></td>
	<td>(const char* pDate)</td></tr>
      <tr valign="top"><td><a href="ADate.html">ADate</a>&amp;</td>
	<td><a href="ADate.html#operator=3">operator=</a></td>
	<td>(const std::string&amp; date)</td></tr>
      <tr valign="top"><td><a href="ADate.html">ADate</a>&amp;</td>
	<td><a href="ADate.html#operator=4">operator=</a></td>
	<td>(const struct tm&amp; tm)</td></tr>
      <tr valign="top"><td><a href="ADate.html">ADate</a>&amp;</td>
	<td><a href="ADate.html#operator=5">operator=</a></td>
	<td>(const time_t date)</td></tr>
      <tr valign="top"><td>virtual void</td>
	<td><a href="ADate.html#readFromStream">readFromStream</a></td>
	<td>(istream&amp; in)</td></tr>

      <tr valign="top"><td>virtual void</td>
	<td><a href="ADate.html#define">define</a></td><td>()</td></tr>
      <tr valign="top"><td>void</td>
	<td><a href="ADate.html#setDay">setDay</a></td><td>(char Day)</td></tr>
      <tr valign="top"><td>void</td>
	<td><a href="ADate.html#setMonth">setMonth</a></td><td>(char Month)</td></tr>
      <tr valign="top"><td>void</td>
	<td><a href="ADate.html#setYear">setYear</a></td><td>(int Year)</td></tr>

      <tr valign="top"><td>static <a href="ADate.html">ADate</a></td>
	<td><a href="ADate.html#today">today</a></td><td>()</td></tr>

      <tr valign="top"><td>char</td><td><a href="ADate.html#getDay">getDay</a>
	</td><td>() const</td></tr>
      <tr valign="top"><td>char</td>
	<td><a href="ADate.html#getMonth">getMonth</a></td><td>() const</td></tr>
      <tr valign="top"><td>int</td>
	<td><a href="ADate.html#getYear">getYear</a></td><td>() const</td></tr>

      <tr valign="top"><td>virtual std::string</td>
	<td><a href="ADate.html#toString">toString</a></td><td>() const</td></tr>
      <tr valign="top"><td>virtual std::string</td>
	<td><a href="ADate.html#toString2">toString</a></td>
	<td>(const char* format) const</td></tr>

      <tr valign="top"><td>virtual struct tm</td>
	<td><a href="ADate.html#toStructTM">toStructTM</a></td><td>() const</td></tr>
      <tr valign="top"><td>time_t</td>
	<td><a href="ADate.html#toSysTime">toSysTime</a></td><td>() const</td></tr>

      <tr valign="top"><td><a href="ADate.html">ADate</a>&</td>
	<td><a href="ADate.html#operator+=">operator+=</a></td>
	<td>(const <a href="ADate.html">ADate</a>&amp; rhs)</td></tr>
      <tr valign="top"><td><a href="ADate.html">ADate</a>&</td>
	<td><a href="ADate.html#operator-=">operator-=</a></td>
	<td>(const <a href="ADate.html">ADate</a>&amp; rhs)</td></tr>

      <tr valign="top"><td>friend <a href="ADate.html">ADate</a></td>
	<td><a href="ADate.html#operator+">operator+</a></td>
	<td>(const <a href="ADate.html">ADate</a>&amp; lhs,
	  const <a href="ADate.html">ADate</a>&amp; rhs);</td></tr>
      <tr valign="top"><td>friend <a href="ADate.html">ADate</a></td>
	<td><a href="ADate.html#operator-">operator-</a></td>
	<td>(const <a href="ADate.html">ADate</a>&amp; lhs,
	  const <a href="ADate.html">ADate</a>&amp; rhs);</td></tr>

      <tr valign="top"><td><a href="ADate.html">ADate</a>&amp;</td>
	<td><a href="ADate.html#add">add</a></td>
	<td>(char Day, char Month = 0, int Year = 0)</td></tr>
      <tr valign="top"><td><a href="ADate.html">ADate</a>&amp;</td>
	<td><a href="ADate.html#sub">sub</a></td>
	<td>(char Day, char Month = 0, int Year = 0)</td></tr>

      <tr valign="top"><td>bool</td>
	<td><a href="ADate.html#operator==">operator==</a></td>
	<td>(const <a href="ADate.html">ADate</a>&amp; other)</td></tr>
      <tr valign="top"><td>bool</td>
	<td><a href="ADate.html#operator!=">operator!=</a></td>
	<td>(const <a href="ADate.html">ADate</a>&amp; other)</td></tr>
      <tr valign="top"><td>bool</td>
	<td><a href="ADate.html#operatorl">operator&lt;</a></td>
	<td>(const <a href="ADate.html">ADate</a>&amp; other)</td></tr>
      <tr valign="top"><td>bool</td>
	<td><a href="ADate.html#operatorg">operator&gt;</a></td>
	<td>(const <a href="ADate.html">ADate</a>&amp; other)</td></tr>
      <tr valign="top"><td>bool</td>
	<td><a href="ADate.html#operatorl=">operator&lt;=</a></td>
	<td>(const <a href="ADate.html">ADate</a>&amp; other)</td></tr>
      <tr valign="top"><td>bool</td>
	<td><a href="ADate.html#operatorg=">operator&gt;=</a></td>
	<td>(const <a href="ADate.html">ADate</a>&amp; other)</td></tr>
      <tr valign="top"><td>long</td>
	<td><a href="ADate.html#compare">compare</a></td>
	<td>(const <a href="ADate.html">ADate</a>&amp; other)</td></tr>

      <tr valign="top"><td>char</td>
	<td><a href="ADate.html#maxDayOf">maxDayOf</a></td><td>() const</td></tr>
      <tr valign="top"><td>static char</td>
	<td><a href="ADate.html#maxDayOf2">maxDayOf</a></td>
	<td>(char month, int year)</td></tr>
      <tr valign="top"><td>static bool</td>
	<td><a href="ADate.html#isLeapYear2">isLeapYear</a></td>
	<td>(int year)</td></tr>

      <tr valign="top"><td>virtual int</td>
	<td><a href="ADate.html#checkIntegrity">checkIntegrity</a></td><td>() const</td></tr>

      <tr><td>&nbsp;</td></tr>
      <tr valign="top"><td colspan="3"><h3>protected member index</h3></td></tr>
      <tr valign="top"><td>void</td>
	<td><a href="ADate.html#incDay">incDay</a></td><td>()</td></tr>
      <tr valign="top"><td>void</td>
	<td><a href="ADate.html#decDay">decDay</a></td><td>()</td></tr>

      <tr valign="top"><td>virtual bool</td>
	<td><a href="ADate.html#minAdapt">minAdapt</a></td><td>()</td></tr>
      <tr valign="top"><td>virtual bool</td>
	<td><a href="ADate.html#maxAdapt">maxAdapt</a></td><td>()</td></tr>
    </table>

    <hr noshade="noshade">
    <h2>Member descriptions</h2>

    <h4>Management functions</h4>
    <pre><a name="ADate">ADate ()</a></pre>
    <dl>
      <dd>Defaultconstructor; the date is not defined</dd>
    </dl>

    <pre><a name="ADate3">ADate (const ADate& other)</a></pre>
    <pre><a name="ADate2">ADate (bool now)</a></pre>
    <dl>
      <dd>Constructor; depending on the parameter the date is either set to the
        first of January, 1900 (now = false), or to the current day (now =
	true).</dd><dd></dd>
    </dl>

    <pre><a name="ADate4">ADate (char Day, char Month, int Year)</a></pre>
    <dl>
      <dd>Constructor; sets the passed date. The date is undefined, if the
	passed parameters represent no valid day.</dd>
    </dl>

    <pre><a name="ADate5">ADate (const char* pDate)</a></pre>
    <dl>
      <dd>Constructor; sets the passed date, which must be represented as
        <i>day.month.year</i>. If the buffer does not represent a valid day,
	the date is set to undefined. A NULL-pointer as parameter
	is not permitted!</dd>
    </dl>

    <pre><a name="ADate6">virtual ADate (std::string&amp; date)</a></pre>
    <dl>
      <dd>Constructor; sets the passed date, which must be represented as
        <i>day.month.year</i>. If the string does not represent a valid day,
	the date is set to undefined.</dd>
    </dl>

    <pre><a name="ADate7">ADate (const struct tm&amp; date)</a></pre>
    <dl>
      <dd>Constructor; assigns the values from the passed struct tm to the
	date.</dd>
    </dl>

    <pre><a name="ADate8">ADate (const time_t date)</a></pre>
    <dl>
      <dd>Constructor; sets the date to the value represented by the parameter.</dd>
    </dl>

    <pre><a name="~ADate">virtual ~ADate ()</a></pre>
    <pre><a name="operator=">ADate&amp; operator= (const ADate&amp; other)</a></pre>

    <pre><a name="operator=2">ADate&amp; operator= (const char* pDate)</a></pre>
    <dl>
      <dd>Assignment-operator from an const char-pointer. The date must be
	passed as <i>day.month.year</i>. If the buffer does not represent a
	valid day, the date is set to undefined.</dd>
    </dl>

    <pre><a name="operator=3">ADate&amp; operator= (const std::string&amp; date)</a></pre>
    <dl>
      <dd>Assignment-operator from a const string. The date must be passed as
	<i>day.month.year</i>. If the string does not represent a valid day,
	the date is set to undefined.</dd>
    </dl>

    <pre><a name="operator=4">ADate&amp; operator= (const struct tm&amp; date)</a></pre>
    <dl>
      <dd>Assignment-operator; assigns the values from the passed struct tm.</dd>
    </dl>

    <pre><a name="operator=5">ADate&amp; operator= (const time_t date)</a></pre>
    <dl>
      <dd>Assignment-operator; sets the date to the value represented by the
	parameter.</dd>
    </dl>

    <pre><a name="define">void define ()</a></pre>
    <dl>
      <dd>Sets the date to the 1st of January, 1900.</dd>
    </dl>

    <pre><a name="setDay">void setDay (char Day)</a></pre>
    <dl>
      <dd>Sets the day to the passed value. If the date is not valid, it is
	set to undefined.</dd>
    </dl>

    <pre><a name="setMonth">void setMonth (char Month)</a></pre>
    <dl>
      <dd>Sets the month to the passed value. If the date is not valid, it is
	set to undefined.</dd>
    </dl>

    <pre><a name="setYear">void setYear (int Year)</a></pre>
    <dl>
      <dd>Sets the year to the passed value.</dd>
    </dl>

    <h4>In- &amp; output, conversion</h4>
    <pre><a name="readFromStream">virtual void readFromStream (istream& in)</a></pre>
    <dl>
      <dd>Reads a date as <i>day.month.year</i> from a stream. If the input is
	not valid, the object is set to undefined.</dd>
    </dl>

    <pre><a name="toString">virtual std::string toString () const</a></pre>
    <dl>
      <dd>Converts the date into a string, in the format specified by the
	current locale.</dd>
    </dl>

    <pre><a name="toString2">virtual std::string toString (const char* format) const</a></pre>
    <dl>
      <dd>Converts the date into a string, in the specified format. The
	parameter format can be any value accepted by the <i>strftime</i>
	library-routine.
	<p><b>Note</b>: The maximal length of the resulting string is 80
	  characters!</p></dd>
    </dl>

    <pre><a name="toStructTM">virtual struct tm toStructTM () const</a></pre>
    <dl>
      <dd>Converts the date to a struct tm.</dd>
    </dl>

    <pre><a name="toSysTime">time_t toSysTime () const</a></pre>
    <dl>
      <dd>Converts the date to a system-timestructure.</dd>
    </dl>

    <h4>Query</h4>
    <pre><a name="getDay">char getDay () const</a></pre>
    <dl>
      <dd>Retrieves the day stored in the object.</dd>
    </dl>

    <pre><a name="getMonth">char getMonth () const</a></pre>
    <dl>
      <dd>Retrieves the month.</dd>
    </dl>

    <pre><a name="getYear">int getYear () const</a></pre>
    <dl>
      <dd>Retrieves the  year.</dd>
    </dl>

    <pre><a name="today">static ADate today ()</a></pre>
    <dl>
      <dd>Returns a date-object	representing the current day.</dd>
    </dl>

    <h4>Calculation</h4>
    <pre><a name="operator+=">ADate&amp; operator+= (const ADate&amp; rhs)</a></pre>
    <dl>
      <dd>Adds another date-value to the date-object. An undefined date is
	treated as "0.0.0"; so only if both objects are undefined, the result
	is (remains) undefined. Overflows (of day or month) are corrected.</dd>
    </dl>

    <pre><a name="operator-=">ADate&amp; operator-= (const ADate&amp; rhs)</a></pre>
    <dl>
      <dd>Substracts another date-value from the date-object. An undefined date
	is treated as "0.0.0"; the result is (remains) undefined if both
	objects are undefined. Underflows (of day or month) are corrected.</dd>
    </dl>

    <pre><a name="operator+">ADate&amp; operator+ (const ADate&amp; lhs, const ADate&amp; rhs)</a></pre>
    <dl>
      <dd>Adds two date-values and returns the result. An undefined date is
	treated as "0.0.0"; the result is (remains) undefined if both objects
	re undefined. Overflows (of day or month) are corrected.</dd>
    </dl>

    <pre><a name="operator-">ADate&amp; operator- (const ADate&amp; lhs, const ADate&amp; rhs)</a></pre>
    <dl>
      <dd>Substracts two date-values and returns the result. An undefined date
	is treated as "0.0.0"; the result is (remains) undefined if both objects
	are undefined. Overflows (of day or month) are corrected.</dd>
    </dl>

    <pre><a name="add">ADate&amp; add (char Day, char Month = 0, int Year = 0)</a></pre>
    <dl>
      <dd>If this is not undefined, the passed values are added (with attention
	to overflows). The result is returned.
	<p><b>Note</b>: In counterpart to the mathematic operators (+ and -)
	  this method does <b>not</b> change the object if it is undefined!</p></dd>
    </dl>

    <pre><a name="sub">ADate&amp; sub (char Day, char Month = 0, int Year = 0)</a></pre>
    <dl>
      <dd>If this is not undefined, the passed values are substracted (with
	attention to underflows). The result is returned.
	<p><b>Note</b>: In counterpart to the mathematic operators (+ and -)
	  this method does <b>not</b> change the object if it is undefined!</p></dd>
    </dl>

    <h4>Comparison</h4>
    <pre><a name="operator==">bool operator== (const ADate&amp; other)</a></pre><dl><dd>
	Compares two date-objects and returns true, if they are equal (either
	the same day or both undefined).</dd></dl>

    <pre><a name="operator!=">bool operator!= (const ADate&amp; other)</a></pre><dl><dd>
	Compares two date-objects and returns true, if they are not equal
	(different days and not both undefined).</dd></dl>

    <pre><a name="operatorl">bool operator&lt; (const ADate&amp; other)</a></pre><dl><dd>
	Compares two date-objects and returns true, if this is "older" (further
	in the past) than other (e.g. "yesterday" &lt; "today" == true).
	Undefined values are considered as older than any other date.</dd></dl>

    <pre><a name="operatorg">bool operator&gt; (const ADate&amp; other)</a></pre><dl><dd>
	Compares two date-objects and returns true, if this is "younger" (later
	on a time-line) than other (e.g. "tomorrow" &gt; "today" == true).
	Undefined values are considered as older than any other date.</dd></dl>

    <pre><a name="operatorl=">bool operator&lt;= (const ADate&amp; other)</a></pre><dl><dd>
	Compares two date-objects and returns true, if this is "older" (further
	in the past) than other or equal to it (e.g. "yesterday" &lt;= "today"
	== true; two undefined values are also considered as equal).
	Undefined values are considered as older than any other date.</dd></dl>

    <pre><a name="operatorg=">bool operator&gt;= (const ADate&amp; other)</a></pre><dl><dd>
	Compares two date-objects and returns true, if this is "younger" (later
	on a time-line) than other or equal to it (e.g. "tomorrow" &gt;= "today"
	== true; two undefined values are also considered as equal).
	Undefined values are considered as older than any other date.</dd></dl>

    <pre><a name="compare">long compare (const ADate&amp; other)</a></pre><dl><dd>
	Returns the (approximated) difference in days between two dates. If
	both dates are undefined, those difference is "0", if only this is
	undefined the result is MINLONG; if other is undefined MAXLONG is
	returned (-&gt; undefined dates are considered as (incredible)
	old).</dd></dl>

    <h4>Utility-functions</h4>
    <pre><a name="maxDayOf">char maxDayOf () const</a></pre><dl><dd>Returns the maximal
	day the month/year-combination of the current object could have.</dd></dl>

    <pre><a name="maxDayOf2">static char maxDayOf (char month, int year)</a></pre><dl><dd>
	Returns the maximal day the specified month could have.</dd></dl>

    <pre><a name="isLeapYear">bool isLeapYear () const</a></pre><dl><dd>Returns true, if
	the current object is a leap-year.</dd></dl>

    <pre><a name="isLeapYear2">static bool isLeapYear (int year)</a></pre><dl><dd>Returns
	true, if the specified year is a leap-year.</dd></dl>

    <pre><a name="incDay">void incDay ()</a></pre><dl><dd>Increments the day of the
	current object with regard of overflows.</dd></dl>

    <pre><a name="decDay">void decDay ()</a></pre><dl><dd>Decrements the day of the
	current object with regard of underflows.</dd></dl>

    <pre><a name="minAdapt">virtual bool minAdapt ()</a></pre><dl><dd>Corrects the object
	after underflows. If the object is integer after this operation, true 
	is returned.</dd></dl>

    <pre><a name="maxAdapt">virtual bool maxAdapt ()</a></pre><dl><dd>Corrects the object
	after overflows. If the object is integer after this operation, true 
	is returned.</dd></dl>

    <pre><a name="checkIntegrity">virtual int checkIntegrity () const</a></pre>
			      <dd><dl>
	Checks if this object represents a valid date. Note: Even undefined
	dates have valid values!</dl></dd></dl>
  </body>
</html>
