<!-- $Id: IVIOAppl.html,v 1.9 2001/09/29 17:07:00 markus Exp $ -->

<html>
  <head>
    <title>General Reference: IVIOApplication</title>
    <meta name="description" content="Documentation of IVIOApplication-class">
    <meta name="keywords" content="Documentation, Docu, IVIOApplication, class">

    <meta name="DC.Creator" content="Markus Schwab">
    <meta name="DC.Date" content="2000-04-14">
    <meta name="DC.Rights" content="Anticopyright (A) 2000, distributed under the GNU General Public License">
  </head>

  <body bgcolor="#F0F0F0" text="#000000" link="#0000FF" vlink="#000077" alink="#FF0000">
    <table align=center border=0 cellspacing=10>
      <tr><td><a href="index.html">Class Index</a></td>
      <td><a href="cross_index.html">Cross Index</a></td></tr>
    </table>

    <h1 align="center">Class IVIOApplication</h1>
    <p>Derived from
      <i>none</i>
      <br>
      Derived by: <i>none</i></p>

    <p>#include &lt;IVIOAppl.h&gt;</p>

    <hr noshade>
    <h2>Description</h2>
    <p>Class to handle the startup of a program.</p>

    <p>The main purpose/advantage of this class is its (UNIX-like)
      parameter-handling (which has additionally the advantage of being very
      good documented; so the following part is the - slightly changed -
      man-page of the getopt-command).</p>

    <p>The parameters are parsed from left to right. Each parameter is
      classified as a short option, a long option (both reported via the
      <a href="IVIOAppl.html#handleOption">handleOption</a>-method), an
      argument to an option, or a non-option parameter.</p>

    <p>A simple short option is a minus (-) or (only in Windoze) a slash (/)
      followed by a short option character. If the option has an argument, it
      may be  written directly after the option character or as the next
      parameter (ie. separated by whitespace on the command line).</p>

    <p>It is possible to specify several short options after one minus (-), as
      long as all (except possibly the last) do not have arguments.</p>

    <p>A long option normally begins with `--'  followed by the long option
      name. If the option has an argument, it may be written directly after the
      long option name, separated by an equal-sign (=), or as the next argument
      (ie. separated by whitespace on the command line). Long options may be
      abbreviated, as long as the abbreviation is not ambiguous.</p>

    <p><b>Note</b>: If long options are supported, they are checked in reverse
      order (last first).</p>

    <p>Every parameter which is not an option or an argument to an
    option or after a '--'-parameter is a non-option parameter and are
    passed to the <a href="IVIOAppl.html#perform">perform</a>-method.
    Options are inspected before that method is called!</p>

    <p><b>Note</b>: The options "-h" or "-?" are always used to display the help
      of the application.</p>

    <h4>Programmers information</h4>
    <p>Unlike the UNIX getopt-function, optional paramters need not to be
      marked in a special way. Instead use the
      <a href="IVIOAppl.html#checkOptionValue">checkOptionValue</a>-method to retrieve
      the value of the possible argument, analyze it (like for having no
      leading minus (-)) and retrieve commit it with the
      <a href="IVIOAppl.html#getOptionValue">getOptionValue</a>-method if OK.</p>

    <hr noshade>
    <table border="0">
      <tr><td colspan="3"><h3>public function member index</h3></td></tr>
      <tr valign="top"><td><tt></tt> </td>
        <td><a href="IVIOAppl.html#IVIOApplication"><b>IVIOApplication</b></a></td>
        <td><tt>(<tt>const</tt> <tt><font color="purple">int</font></tt> <tt><font color="blue">argc</font></tt>, <tt>const</tt> <tt><font color="purple">char</font></tt>* <tt><font color="blue">argv[]</font></tt>, <tt>const</tt> <tt><a href="IVIOAppl.html#IVIOApplication"><b>IVIOApplication</b></a></tt>* <tt><font color="blue">pOpt</font></tt> = NULL)</tt>;</td></tr>
      <tr valign="top"><td><tt><tt><font color="purple">int</font></tt></tt> </td>
        <td><a href="IVIOAppl.html#run"><b>run</b></a></td>
        <td><tt>()</tt>;</td></tr>
      <tr valign="top"><td><tt><tt>virtual</tt> </tt> </td>
        <td><a href="IVIOAppl.html#~IVIOApplication"><b>~IVIOApplication</b></a></td>
        <td><tt>()</tt>;</td></tr>
      <tr><td>&nbsp;</td></tr>

      <tr><td colspan="3"><h3>protected function member index</h3></td></tr>
      <tr valign="top"><td><tt><tt>const</tt> <tt><font color="purple">char</font></tt>*</tt> </td>
        <td><a href="IVIOAppl.html#checkOptionValue"><b>checkOptionValue</b></a></td>
        <td><tt>() <tt>const</tt></tt>;</td></tr>
      <tr valign="top"><td><tt><tt>virtual</tt> <tt>const</tt> <tt><font color="purple">char</font></tt>*</tt> </td>
        <td><a href="IVIOAppl.html#description"><b>description</b></a></td>
        <td><tt>() <tt>const</tt></tt>;</td></tr>
      <tr valign="top"><td><tt><tt>const</tt> <tt><font color="purple">char</font></tt>*</tt> </td>
        <td><a href="IVIOAppl.html#filename"><b>filename</b></a></td>
        <td><tt>() <tt>const</tt></tt>;</td></tr>
      <tr valign="top"><td><tt><tt>const</tt> <tt><font color="purple">char</font></tt>*</tt> </td>
        <td><a href="IVIOAppl.html#getOptionValue"><b>getOptionValue</b></a></td>
        <td><tt>()</tt>;</td></tr>
      <tr valign="top"><td><tt><tt>virtual</tt> <tt><font color="purple">bool</font></tt></tt> </td>
        <td><a href="IVIOAppl.html#handleOption"><b>handleOption</b></a></td>
        <td><tt>(<tt>const</tt> <tt><font color="purple">char</font></tt> <tt><font color="blue">option</font></tt>)</tt>;</td></tr>
      <tr valign="top"><td><tt><tt>virtual</tt> <tt>const</tt> <tt><font color="purple">char</font></tt>*</tt> </td>
        <td><a href="IVIOAppl.html#name"><b>name</b></a></td>
        <td><tt>() <tt>const</tt></tt>;</td></tr>
      <tr valign="top"><td><tt><tt>virtual</tt> <tt><font color="purple">int</font></tt></tt> </td>
        <td><a href="IVIOAppl.html#perform"><b>perform</b></a></td>
        <td><tt>(<tt><font color="purple">int</font></tt> <tt><font color="blue">argc</font></tt>, <tt>const</tt> <tt><font color="purple">char</font></tt>* <tt><font color="blue">argv[]</font></tt>)</tt>;</td></tr>
      <tr valign="top"><td><tt><tt><font color="purple">void</font></tt></tt> </td>
        <td><a href="IVIOAppl.html#setLongOptions"><b>setLongOptions</b></a></td>
        <td><tt>(<tt>const</tt> <tt><font color="navy">longOptions</font></tt>* <tt><font color="blue">pLongOpts</font></tt>)</tt>;</td></tr>
      <tr valign="top"><td><tt><tt><font color="purple">void</font></tt></tt> </td>
        <td><a href="IVIOAppl.html#setLongOptions"><b>setLongOptions</b></a></td>
        <td><tt>(<tt>const</tt> <tt><font color="navy">longOptions</font></tt>* <tt><font color="blue">pLongOpts</font></tt>, <tt><font color="navy">unsigned</font></tt> <tt><font color="purple">int</font></tt> <tt><font color="blue">numLongOpts</font></tt>)</tt>;</td></tr>
      <tr valign="top"><td><tt><tt>virtual</tt> <tt><font color="purple">bool</font></tt></tt> </td>
        <td><a href="IVIOAppl.html#shallShowInfo"><b>shallShowInfo</b></a></td>
        <td><tt>() <tt>const</tt></tt>;</td></tr>
      <tr valign="top"><td><tt><tt>virtual</tt> <tt><font color="purple">void</font></tt></tt> </td>
        <td><a href="IVIOAppl.html#showHelp"><b>showHelp</b></a></td>
        <td><tt>() <tt>const</tt></tt>;</td></tr>
    </table>

    <hr noshade>
    <h2>Member descriptions</h2>

    <h4>Management functions</h4>
    <pre><a name="IVIOApplication"></a>IVIOApplication (const int argc, const char* argv[], const <a href="IVIOAppl.html#longOptions">longOptions</a>* pOpt = NULL)</pre>
    <dl>
      <dd>Constructor; the parameters specify the number of and an array with
        the program-arguments (as passed to the main-function) and a table to
        map the verbose long-options to their short equivalent. If the third
        parameter is NULL, no long options are used.</dd>
    </dl>
    <pre><a name="~IVIOApplication"></a>~IVIOApplication ()</pre>

    <pre><a name="run"></a>int run ()</pre>
    <dl>
      <dd>Runs the application; first the options are checked. If an invalid or
        a help-option is passed, the help-screen is displayed, else the
        actual job of the application is performed.</dd>
    </dl>

    <h4>Option handling</h4>
    <pre><a name="handleOption"></a>virtual bool handleOption (const char option) = 0</pre>
    <dl>
      <dd>Checks if the passed option is supported by the application. This
        method must return true, if yes and false if not. In the second case
        the help is displayed and the program terminates with an error-code of
        -1.</dd>
    </dl>

    <pre><a name="getOptionValue"></a>const char* getOptionValue ()</pre>
    <dl>
      <dd>Returns parameters to the actual option and increases the pointer to
        the next option. This parameter are searched
        using the following algorithm:
        <ul type="disc">
          <li>The remaining characters in a list of simple options (e.g. if
            called for the option d in "-dlevel1" the method would return
            "level1")</li>
          <li>The next argument of the application. Long options only support
            the second way.</li>
          <li>NULL</li>
        </ul>
      </dd>
    </dl>
    <pre><a name="checkOptionValue"></a>const char* checkOptionValue ()</pre>
    <dl>
      <dd>Returns parameters to the actual option. This parameter are searched
        using the following algorithm:
        <ul type="disc">
          <li>The remaining characters in a list of simple options (e.g. if
            called for the option d in "-dlevel1" the method would return
            "level1")</li>
          <li>The next argument of the application. Long options only support
            the second way.</li>
          <li>NULL</li>
        </ul>
        <p>In difference to <a href="IVIOAppl.html#getOptionValue">getOptionValue</a>
          this method does not change the next option which would be returned,
          so in the previous example the next found option would be the 'l'.</p></dd>
    </dl>

    <pre><a name="setLongOptions"></a>void setLongOptions (const <a href="IVIOAppl.html#longOptions">longOptions</a>* pLongOptions)</pre>
    <dl>
      <dd>Sets a table which maps options to a verbose version. This table must
        be terminated with an entry where the short option is '\0' and the
        associated long options is NULL; the previous entries must not have
        lines with those values.</dd>
    </dl>
    <pre><a name="setLongOptions2"></a>void setLongOptions (const <a href="IVIOAppl.html#longOptions">longOptions</a>* pLongOptions, unsigned int numLongOptions)</pre>
    <dl>
      <dd>Sets a table which maps options to a verbose version. This table
        must not contain entries with either '\0' as short option or NULL as
        long option.</dd>
    </dl>

    <h4>Program handling</h4>
    <pre><a name="perform"></a>virtual int perform (int argc, const char* argv[]) = 0</pre>
    <dl>
      <dd>Performs the job of the application. The return-code of this method
        is returned as error-code of the application.</dd>
    </dl>

    <pre><a name="name"></a>virtual const char* name () const</pre>
    <dl>
      <dd>Returns the name of the application. The default action is to return
        the name of the file as stored in index 0 of the argv-array.</dd>
    </dl>
    <pre><a name="description"></a>virtual const char* description () const = 0</pre>
    <dl>
      <dd>Returns a description to the program. This text must start with the
        version-number.</dd>
    </dl>
    <pre><a name="filename"></a>virtual const char* filename () const</pre>
    <dl>
      <dd>Returns the filename of the application as stored in index 0 of the
	argv-array.</dd>
    </dl>

    <pre><a name="shallShowInfo"></a>virtual bool shallShowInfo () const</pre>
    <dl>
      <dd>Specifies if the application shall display the program-info
        (consisting of name and description).</dd>
    </dl>
    <pre><a name="showHelp"></a>virtual void showHelp () const = 0</pre>
    <dl>
      <dd>Displays the help-screen of the application.</dd>
    </dl>

    <hr noshade>

    <table align="center" border="0" cellspacing="10">
      <tr><td><a href="index.html">Class Index</a></td></tr>
    </table>

    <h1 align="center"><a name="longOptions">Struct IVIOApplication::longOptions</a></h1>
    <p>Derived from
      <i>none</i>
      <br>
      Derived by: <i>none</i></p>

    <p>#include &lt;IVIOAppl.h&gt;</p>

    <hr noshade>
    <h2>Description</h2>
    <p>Structure to associate long (verbose) options with the corrosponding
      short version.</p>

    <hr noshade>
    <table border="0">
      <tr valign="top"><td colspan="2"><h3>public variable member index</h3></td></tr>
      <tr valign="top"><td><tt><font color="purple">char</font>* </tt></td><td><tt><font color="blue">longVal</font></tt></td></tr>
      <tr valign="top"><td><tt><font color="purple">char</font> </tt></td><td><tt><font color="blue">shortVal</font></tt></td></tr>
    </table>
  </body>
</html>
