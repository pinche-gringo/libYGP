<!-- $Id: DirSrch.html,v 1.9 2001/09/29 17:05:40 markus Exp $ -->

<html>
  <head>
    <title>General Reference: DirectorySearch</title>
    <meta name="description" content="Documentation of DirectorySearch-class">
    <meta name="keywords" content="Documentation, Docu, DirectorySearch, class">

    <meta name="DC.Creator" content="Markus Schwab">
    <meta name="DC.Date" content="2000-04-14">
    <meta name="DC.Rights" content="Anticopyright (A) 2000, distributed under the GNU General Public License">
  </head>

  <body bgcolor="#F0F0F0" text="#000000" link="#0000FF" vlink="#000077" alink="#FF0000">
    <table align=center border=0 cellspacing=10>
      <tr><td><a href="index.html">Class Index</a></td>
      <td><a href="cross_index.html">Cross Index</a></td></tr>
    </table>

    <h1 align="center">Class DirectorySearch</h1>
    <p>Derived from
      <a href="IDirSrch.html">IDirectorySearch</a>
      <br>
      Derived by:
      <a href="PathDirSrch.html">PathDirectorySearch</a></p>

    <p>#include &lt;DirSrch.h&gt;</p>

    <hr noshade>
    <h2>Description</h2>
    <p>Class to search for files in a directory. This search can be restricted
      to files matching certain name-criterias or by attributes.</p>

    <p>The name-part of the files to search supports UNIX-like wildcards; that
      are the asterisk (*) for any number of any characters, the question-mark
      for any single character and a set of characters in brackets (([) and
      (])). This set can contain a list of characters (like [abcde]) or a
      region (like [a-e]). To invert this set use a leading caret (^) or a
      leading exclamation mark (!), like ([^a-e]).</p>

    <p>The found (and matching) files are retrieved by objects of type
      <a href="DirEntry.html"><b>dirEntry</b></a>.</p>

    <p><b>Note</b>: The class does <b>not</b> do any word expansion for the
      search-path (like expanding the tilde (~) to the home-directory)!</p>

    <hr noshade>
    <table border="0">
      <tr valign="top"><td colspan="3"><h3>public member index</h3></td></tr>
      <tr><td colspan="3"><h3>public function member index</h3></td></tr>
      <tr valign="top"><td><tt></tt> </td>
        <td><a href="DirSrch.html#DirectorySearch"><b>DirectorySearch</b></a></td>
        <td><tt>()</tt>;</td></tr>
      <tr valign="top"><td><tt></tt> </td>
        <td><a href="DirSrch.html#DirectorySearch2"><b>DirectorySearch</b></a></td>
        <td><tt>(<tt>const</tt> <tt><font color="purple">std::string</font></tt>&amp; <tt><font color="blue">search</font></tt>)</tt>;</td></tr>
      <tr valign="top"><td><tt><tt>virtual</tt> <tt><font color="purple">int</font></tt></tt> </td>
        <td><a href="DirSrch.html#find2"><b>find</b></a></td>
        <td><tt>(<a href="DirEntry.html"><b>dirEntry</b></a>&amp; <tt><font color="blue">result</font></tt>, <tt><font color="navy">unsigned</font></tt> <tt><font color="purple">long</font></tt> <tt><font color="blue">attribs</font> = IDirectorySearch::FILE_NORMAL)</tt>;</td></tr>
      <tr valign="top"><td><tt><tt><font color="purple">int</font></tt></tt> </td>
        <td><a href="DirSrch.html#find"><b>find</b></a></td>
        <td><tt>(<tt>const</tt> <tt><font color="purple">std::string</font></tt>&amp; <tt><font color="blue">search</font></tt>, <a href="DirEntry.html"><b>dirEntry</b></a>&amp; <tt><font color="blue">result</font></tt>, <tt><font color="navy">unsigned</font></tt> <tt><font color="purple">long</font></tt> <tt><font color="blue">attribs</font> = IDirectorySearch::FILE_NORMAL</tt>)</tt>;</td></tr>
      <tr valign="top"><td><tt><tt>virtual</tt> <tt><font color="purple">int</font></tt></tt> </td>
        <td><a href="DirSrch.html#find3"><b>find</b></a></td>
        <td><tt>()</tt>;</td></tr>
      <tr valign="top"><td><tt><tt>virtual</tt> <tt><font color="purple">std::string</font></tt></tt> </td>
        <td><a href="DirSrch.html#getDirectory"><b>getDirectory</b></a></td>
        <td><tt>() <tt>const</tt></tt>;</td></tr>
      <tr valign="top"><td><tt><tt>virtual</tt> <tt><font color="purple">std::string</font></tt></tt> </td>
        <td><a href="DirSrch.html#getFileSpec"><b>getFileSpec</b></a></td>
        <td><tt>() <tt>const</tt></tt>;</td></tr>
      <tr valign="top"><td><tt><tt>static</tt> <tt><font color="purple">bool</font></tt></tt> </td>
        <td><a href="DirSrch.html#isValid"><b>isValid</b></a></td>
        <td><tt>(<tt>const</tt> <tt><font color="purple">std::string</font></tt>&amp; <tt><font color="blue">dir</font></tt>)</tt>;</td></tr>
      <tr valign="top"><td><tt><tt>virtual</tt> <tt><font color="purple">bool</font></tt></tt> </td>
        <td><a href="DirSrch.html#isValid2"><b>isValid</b></a></td>
        <td><tt>() <tt>const</tt></tt>;</td></tr>
      <tr valign="top"><td><tt><tt>virtual</tt> <tt><font color="purple">void</font></tt></tt> </td>
        <td><a href="DirSrch.html#setSearchValue"><b>setSearchValue</b></a></td>
        <td><tt>(<tt>const</tt> <tt><font color="purple">std::string</font></tt>&amp; <tt><font color="blue">search</font></tt>)</tt>;</td></tr>
      <tr valign="top"><td><tt><tt>virtual</tt> </tt> </td>
        <td><a href="DirSrch.html#~DirectorySearch"><b>~DirectorySearch</b></a></td>
        <td><tt>()</tt>;</td></tr>
      <tr><td>&nbsp;</td></tr>
      <tr><td colspan="3"><h3>protected function member index</h3></td></tr>
      <tr valign="top"><td><tt><tt>virtual</tt> <tt><font color="purple">int</font></tt></tt> </td>
        <td><a href="DirSrch.html#checkIntegrity"><b>checkIntegrity</b></a></td>
        <td><tt>() <tt>const</tt></tt>;</td></tr>
      <tr valign="top"><td><tt><tt><font color="purple">void</font></tt></tt> </td>
        <td><a href="DirSrch.html#cleanup"><b>cleanup</b></a></td>
        <td><tt>()</tt>;</td></tr>
      <tr valign="top"><td><tt><tt><font color="purple">void</font></tt></tt> </td>
        <td><a href="DirSrch.html#result"><b>result</b></a></td>
        <td><tt>(<tt><a href="DirEntry.html"><b>dirEntry</b></a></tt>* <tt><font color="blue">pResult</font></tt>)</tt>;</td></tr>
      <tr valign="top"><td><tt><tt><font color="purple">void</font></tt></tt> </td>
        <td><a href="DirSrch.html#result2"><b>result</b></a></td>
        <td><tt>(<tt><a href="DirEntry.html"><b>dirEntry</b></a></tt>&amp; <tt><font color="blue">result</font></tt>)</tt>;</td></tr>
    </table>

    <hr noshade>
    <h2>Member descriptions</h2>

    <h4>Management functions</h4>
    <pre><a name="DirectorySearch"></a>DirectorySearch ()</pre>
    <pre><a name="DirectorySearch2"></a>DirectorySearch (const std::string &amp; search)</pre>
    <dl>
      <dd>Constructor; creates an object with the files to search. The
        parameter can include path-information.</dd>
    </dl>
    <pre><a name="~DirectorySearch"></a>~DirectorySearch ()</pre>

    <pre><a name="setSearchValue"></a>void setSearchValue (const std::string&amp; search)</pre>
    <dl>
      <dd>Sets the files to search for (and the path where to search).</dd>
    </dl>
    <pre><a name="getDirectory"></a>std::string getDirectory () const</pre>
    <dl>
      <dd>Retrieves the path where to search files.</dd>
    </dl>
    <pre><a name="getFileSpec"></a>std::string getDirectory () const</pre>
    <dl>
      <dd>Retrieves the name of the files to search.</dd>
    </dl>

    <pre><a name="result"></a>void result (<a href="DirEntry.html"><b>dirEntry</b></a>* result);</pre>
    <dl>
      <dd>Sets the buffer for the result.</dd>
    </dl>
    <pre><a name="result2"></a>void result (<a href="DirEntry.html"><b>dirEntry</b></a>&amp; result);</pre>
    <dl>
      <dd>Sets the buffer for the result.</dd>
    </dl>

    <h4>Find functions</h4>
    <pre><a name="find"></a>int find (const std::string&amp; search, <a href="DirEntry.html"><b>dirEntry</b></a>&amp; result,
          unsigned long attribs = FILE_NORMAL)</pre>
    <dl>
      <dd><p>Searches for files specified by search; if at least one is found, the
          result is placed into result.</p>

        <p>Possible values for <i>attribs</i> are described
          <a href="IDirSrch.html#Attributes"><b>here</b></a>.</p>

        <p>This call returns 0, if a file was found, errno otherwise.</p></dd>
    </dl>

    <pre><a name="find2"></a>virtual int find (<a href="DirEntry.html"><b>dirEntry</b></a>&amp; result,
                  unsigned long attribs = FILE_NORMAL)</pre>
    <dl>
      <dd><p>Searches for the first file matching the input specified by the
          constructor or the setFile-method. The first found file is placed into
          result.</p>

        <p>Possible values for <i>attribs</i> are described
          <a href="IDirSrch.html#Attributes"><b>here</b></a>.</p>

        <p>This call returns 0, if a file was found, errno otherwise.</p></dd>
    </dl>

    <pre><a name="find3"></a>virtual int find ()</pre>
    <dl>
      <dd>Returns the next matching file according to parameters specified in
        early find-calls. If a file was found 0 is returned, errno otherwise.</dd>
    </dl>

    <h4>Utility functions</h4>
    <pre><a name="isValid2"></a>virtual bool isValid () const</pre>
    <dl>
      <dd>Checks if the directory-part of this object specifies an existing directory.</dd>
    </dl>
    <pre><a name="isValid"></a>static bool isValid (const std::string&amp; dir) const</pre>
    <dl>
      <dd>Checks if the passed string specifies an existing directory.</dd>
    </dl>


    <pre><a name="checkIntegrity"></a>virtual int checkIntegrity () const</pre>
    <dl>
      <dd>Checks if this object is integer. If yes 0 is returned, else a number
        describing the error.</dd>
    </dl>

    <pre><a name="cleanup"></a>void cleanup ()</pre>
    <dl>
      <dd>Releases all internally used resources.</dd>
    </dl>
  </body>
</html>
