<!-- -*-HTML-*- -->
<!-- $Id: XApplication.html,v 1.4 2003/02/17 04:42:29 markus Exp $ -->

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
"http://www.w3.org/TR/html4/strict.dtd">
<html>
  <head>
    <title>General Reference: XApplication</title>
    <meta name="description" content="Documentation of XApplication-class">
    <meta name="keywords" content="Documentation, Docu, XApplication, class">

    <meta name="DC.Creator" content="Markus Schwab">
    <meta name="DC.Date" content="2002-12-18">
    <meta name="DC.Rights" content="Anticopyright (A) 2002, distributed under the GNU General Public License">

    <style type="text/css">
      body { background-color:#F0F0F0; color:#000000; }
      a:link { color:#0000FF; }
      a:visited { color:#000077; }
      a:active { color:#FF0000; }
    </style>
  </head>

  <body>
    <table align=center border=0 cellspacing=10>
      <tr><td><a href="index.html">Class Index</a></td>
      <td><a href="cross_index.html">Cross Index</a></td></tr>
    </table>

    <h1 align="center">Class XApplication</h1>
    <p>Derived from
      Window
      <br>
      Derived by:
      <a href="XInfoApplication.html">XInfoApplication</a></p>

    <p>#include &lt;XApplication.h&gt;</p>

    <hr noshade>
    <h2>Description</h2>
    <p>Baseclass for X-applications; it creates an application-window with a
      client. The virtual method command is used to handle the commands defined
      with the menus.</p>

    <p>Furthermore exist the addMenu(s) to create the menu-structure. Note that
      separators and items are added to the last branch (so you better
      start with one of the latter ;). The menus can be accessed via the apMenus map.</p>

    <p>Menus to add are specified by objects of type <b>XApplication::MenuEntry</b> which
      consists of the following entries:</p>

    <dl>
      <dt><code>name</code></dt>
      <dd>Name of the menu as it should be displayed.</dd>
      <dt><code>accel</code></dt>
      <dd>Accelerator in a format understood by Gtk (like <code>&lt;alt&gt;a</code>).</dd>
      <dt><code>id</code></dt>
      <dd>Identifier for the menu. Menus causing actions must have an unique ID.
        Entries having an ID other than 0 are stored in the protected member
        <code>apMenus</code> for later usage.</dd>
      <dt><code>type</code></dt>
      <dd>Type of the menu; the following values are supported:
        <dl>
          <dt><code>ITEM</code></dt>
          <dd>Ordinary menu entry, usually causing an action.</dd>
          <dt><code>CHECKITEM</code></dt>
          <dd>enu entry having one of two states.</dd>
          <dt><code>RADIOITEM</code></dt>
          <dd>Menu entries which allows the selection of only one in a group.</dd>
          <dt><code>LASTRADIOITEM</code></dt>
          <dd>As an <code>RADIOITEM</code>, but terminating the group.</dd>
          <dt><code>SEPARATOR</code></dt>
          <dd>A separating line in between any of the above items.</dd>
          <dt><code>BRANCH</code></dt>
          <dd>A new entry in the menu bar, usually causing no action.</dd>
          <dt><code>LASTBRANCH</code></dt>
          <dd>As <code>BRANCH</code> but causing the entry to be aligned to the
            right of the menu bar.</dd>
          <dt><code>SUBMENU</code></dt>
          <dd>Causes the creation of a new menu inside the previous menu.</dd>
          <dt><code>SUBMENUEND</code></dt>
          <dd>As <code>SUBMENU</code> but terminates the last submenu.</dd>
        </dl>
      </dd>
    </dl>

    <p>Note: Due to limitations in the Gtk-- toolkit (or my stupidity) you can <b>not</b>
      add RadioMenuItems with the addMenu method; but must use the addMenus method
      (as Gtk-- needs a unique group for them, which must be allocated on the
      stack).</p>

    <p>Furthermore there exists the posibility to add a help-menu consisting of:</p>

    <ul>
      <li>An about box (to be implemented by the
        <a href="XApplication.html#showAboutbox"><b>showAboutbox</b></a>-method)</li>
      <li>A content menu (accessible by pressing F1), which executes a browser
        (default: galeon) with a file determinted by the
        <a href="XApplication.html#getHelpfile"><b>getHelpfile</b></a>-method).
        The help must therefore be in HTML-format</li>
      <li>A menu to configure the browser to use</li>
    </ul>

    <p>To get the last two entries, the
      <a href="XApplication.html#getHelpfile"><b>getHelpfile</b></a>-method
      must not return NULL.</p>

    <p><a name="Searchdetails"></a>The following algorithm is used to
      determine the help file to display:</p>

    <ol>
      <li>If the file does not start with a single slash (/) and does not
        specify the file-protocoll (starting with <i>file://</i>), just pass
        the filename to the browser.</li>
      <li>Else assume a local file to display and check the language settings:
        If the environment variable <ocde>LANGUAGE</code> is not empty, take that
        value, else the locale settings (<code>LC_MESSAGES</code>).</li>
      <li>Take every (comma-separated) entry from the value of step 2 and append
        it to the name of the help-file.</li>
      <li>If step 2 does not specify a valid file name, cut the language specifier
        at the last underscore (_). (E.g. change de_AT to de).</li>
      <li>Repeat step 4 until either a file is found or the languge specifier
        is empty. If this still does not succeed, procceed with step 3.</li>
      <li>Nothing worked; search for the file "as is"</li>
      <li>As last resort append an ".en" to the filename</li>
    </ol>

    <hr noshade>
    <table border="0">
      <tr><td colspan="3"><h3>public function member index</h3></td></tr>
      <tr valign="top"><td><tt></tt> </td>
        <td><a href="XApplication.html#XApplication"><b>XApplication</b></a></td>
        <td><tt>(<tt>const</tt> <tt><span style="color:purple;">char</span></tt>* <tt><span style="color:blue;">pTitle</span></tt>)</tt>;</td></tr>
      <tr valign="top"><td><tt><tt>static</tt> <tt><span style="color:purple;">void</span></tt></tt> </td>
        <td><a href="XApplication.html#initI18n"><b>initI18n</b></a></td>
        <td><tt>()</tt>;</td></tr>
      <tr valign="top"><td><tt><tt>static</tt> <tt><span style="color:purple;">void</span></tt></tt> </td>
        <td><a href="XApplication.html#initI18n2"><b>initI18n</b></a></td>
        <td><tt>(<tt>const</tt> <tt><span style="color:purple;">char</span></tt>* <tt><span style="color:blue;">package</span></tt>, <tt>const</tt> <tt><span style="color:purple;">char</span></tt>* <tt><span style="color:blue;">dir</span></tt>)</tt>;</td></tr>
      <tr valign="top"><td><tt></tt> </td>
        <td><a href="XApplication.html#~XApplication"><b>~XApplication</b></a></td>
        <td><tt>()</tt>;</td></tr>
      <tr><td>&nbsp;</td></tr>
      <tr><td colspan="3"><h3>protected function member index</h3></td></tr>
      <tr valign="top"><td><tt><tt><span style="color:navy;">Widget</span></tt>*</tt> </td>
        <td><a href="XApplication.html#addMenu"><b>addMenu</b></a></td>
        <td><tt>(<tt>const</tt> <tt><span style="color:navy;">MenuEntry</span></tt>& <tt><span style="color:blue;">menuEntry</span></tt>)</tt>;</td></tr>
      <tr valign="top"><td><tt><tt><span style="color:purple;">void</span></tt></tt> </td>
        <td><a href="XApplication.html#addMenus"><b>addMenus</b></a></td>
        <td><tt>(<tt>const</tt> <tt><span style="color:navy;">MenuEntry</span></tt> <tt><span style="color:blue;">menuEntryies[]</span></tt>, <tt><span style="color:purple;">int</span></tt> <tt><span style="color:blue;">cMenus</span></tt>)</tt>;</td></tr>
      <tr valign="top"><td><tt><tt>virtual</tt> <tt><span style="color:purple;">void</span></tt></tt> </td>
        <td><a href="XApplication.html#command"><b>command</b></a></td>
        <td><tt>(<tt><span style="color:purple;">int</span></tt> <tt><span style="color:blue;">menu</span></tt>)</tt>;</td></tr>
      <tr valign="top"><td><tt><tt><span style="color:navy;">VBox</span></tt>*</tt> </td>
        <td><a href="XApplication.html#getClient"><b>getClient</b></a></td>
        <td><tt>() <tt>const</tt></tt>;</td></tr>
      <tr valign="top"><td><tt><tt>virtual</tt> <tt>const</tt> <tt><span style="color:purple;">char</span></tt>*</tt> </td>
        <td><a href="XApplication.html#getHelpfile"><b>getHelpfile</b></a></td>
        <td><tt>()</tt>;</td></tr>
      <tr valign="top"><td><tt><tt>virtual</tt> <tt><span style="color:purple;">void</span></tt></tt> </td>
        <td><a href="XApplication.html#showAboutbox"><b>showAboutbox</b></a></td>
        <td><tt>()</tt>;</td></tr>
      <tr valign="top"><td><tt><tt><span style="color:purple;">void</span></tt></tt> </td>
        <td><a href="XApplication.html#showHelpMenu"><b>showHelpMenu</b></a></td>
        <td><tt>()</tt>;</td></tr>
    </table>
    <hr noshade>
    <h2>Member descriptions</h2>
    <h3 style="color:navy">Management functions</h3>
    <pre><a name="XApplication"></a> <b>XApplication</b> (const char* pTitle)</pre>
    <dl>
      <dd><p>Constructor; creates a program-window showing only an empty menu
        and an area (a GTK::VBox) for the client.</p>
        <p>Furthermore SIGSEGV and SIGBUS signals are trapped to produce a stackdump in the log file.</p></dd>
      <dd><dl><dt><b>Parameters</b></dt>
          <dd><code>pTitle</code>: Pointer to title of the application</dd>
      </dl></dd>
    </dl>
    <hr>
    <pre><a name="~XApplication"></a> <b>~XApplication</b> ()</pre>
    <dl>
      <dd><p>Destructor</p></dd>
    </dl>

    <hr>
    <pre><a name="getClient"></a>VBox* <b>getClient</b> () const</pre>
    <dl>
      <dd><p>Returns a pointer to the client box, so that further widgets can be added.</p></dd>
      <dd><dl><dt><b>Returns</b></dt>
          <dd>VBox*: Pointer to the client box.</dd></dl></dd>
    </dl>
    <hr>
    <pre><a name="initI18n"></a>void <b>initI18n</b> () const</pre>
    <dl>
      <dd><p>Initializes the program for localization by setting the
          locale.</p></dd>
    </dl>
    <hr>
    <pre><a name="initI18n2"></a>void <b>initI18n</b> (const char* package, const char* dir) const</pre>
    <dl>
      <dd><p>Initializes the program for internationalization by setting the
          locale and loading the messagefile.</p></dd>
      <dd><dl><dt><b>Parameters</b></dt>
          <dd><code>package</code>: Name of the message-catalog</dd>
          <dd><code>dir</code>: Root-directory for message-catalogs</dd>
      </dl></dd>
    </dl>

    <h3 style="color:navy">Menu handling</h3>
    <pre><a name="addMenu"></a>Widget* <b>addMenu</b> (const MenuEntry&amp; menuEntry)</pre>
    <dl>
      <dd><p>Adds a single menuentry to the menu. Items and submenus are added to the last defined menu; menus are added to the menubar.</p></dd>
      <dd><dl><dt><b>Parameters</b></dt>
          <dd><code>menuEntry</code>: Menuentry to add</dd>
      </dl></dd>
      <dd><dl><dt><b>Returns</b></dt>
          <dd>Widget*: Pointer to the newly created menu or menuitem</dd></dl></dd>
      <dd><dl><dt><b>Remarks</b></dt>
          <dd>Radioitems can't be added with that method!</dd></dl></dd>
    </dl>
    <hr>
    <pre><a name="addMenus"></a>void <b>addMenus</b> (const MenuEntry menuEntries[], int cMenus)</pre>
    <dl>
      <dd><p>Adds a whole bunch of menuentries to the menu. Items and submenus are added to the last defined menu; menus are added to the menubar.</p></dd>
      <dd><dl><dt><b>Parameters</b></dt>
          <dd><code>menuEntries</code>: Pointer to array of MenuEntries</dd>
          <dd><code>cMenus</code>: Number of elements in the array</dd>
      </dl></dd>
      <dd><dl><dt><b>Requires</b></dt>
          <dd>menuEntries not NULL</dd></dl></dd>
    </dl>
    <hr>
    <pre><a name="command"></a>void <b>command</b> (int menu)</pre>
    <dl>
      <dd><p>Pure virtual method to handle the commands (as specified by the <code>menu
       </code> parameter) of the application.</p>
       <p>To be implemented by derived objects.</p></dd>
      <dd><dl><dt><b>Parameters</b></dt>
          <dd><code>menu</code>: ID of the command (menu, toolbar, ...) which has been selected.</dd>
      </dl></dd>
    </dl>

    <hr>
    <pre><a name="showHelpMenu"></a>void <b>showHelpMenu</b> ()</pre>
    <dl>
      <dd><p>Adds a help-menu at the end of the menu. This menu consists of
          an "About"-entry and - if the method getHelpfile does return a
          value - entries to display a help-file and to configure the help
          browser.</p></dd>
    </dl>
    <hr>
    <pre><a name="showAboutbox"></a>void <b>showAboutbox</b> ()</pre>
    <dl>
      <dd><p>Virtual method to display the about box of the program. To be
        implemented by derived objects.</p></dd>
    </dl>
    <hr>
    <pre><a name="getHelpfile"></a>const char* <b>getHelpfile</b> ()</pre>
    <dl>
      <dd><p>Intended to return the name of the file to display in a browser.</p>
        <p>This file is searched for according to the language settings (see
          the beginning of the document for more
          <a href="XApplication.html#Searchdetails">details</a>).</dd>
    </dl>

    <hr noshade><a name="XInfoApplication">
    <table align=center border=0 cellspacing=10>
      <tr><td><a href="index.html">Class Index</a></td>
      <td><a href="cross_index.html">Cross Index</a></td></tr>
    </table>

    <h1 align="center">Class XInfoApplication</h1>
    <p>Derived from
      <a href="XApplication.html">XApplication</a>
      <br>
      Derived by: <i>none</i></p>

    <p>#include &lt;XApplication.h&gt;</p>

    <hr noshade>
    <h2>Description</h2>
    <p>Baseclass for X-applications showing the program-information inside the client.</p>
    <p>The top of the client contains 2 icons for program and programmer and two
      lines for program-information and about the author.</p>

    <hr noshade>
    <table border="0">
      <tr><td colspan="3"><h3>public function member index</h3></td></tr>
      <tr valign="top"><td><tt></tt> </td>
        <td><a href="XInfoApplication.html#XInfoApplication1"><b>XInfoApplication</b></a></td>
        <td><tt>(<tt>const</tt> <tt><span style="color:purple;">char</span></tt>* <tt><span style="color:blue;">pTitle</span></tt>, <tt>const</tt> <tt><span style="color:purple;">char</span></tt>* <tt><span style="color:blue;">pPrgInfo</span></tt>, <tt>const</tt> <tt><span style="color:purple;">char</span></tt>* <tt><span style="color:blue;">pCopyright</span></tt>)</tt>;</td></tr>
      <tr valign="top"><td><tt></tt> </td>
        <td><a href="XInfoApplication.html#~XInfoApplication"><b>~XInfoApplication</b></a></td>
        <td><tt>()</tt>;</td></tr>
      <tr><td>&nbsp;</td></tr>
      <tr><td colspan="3"><h3>protected function member index</h3></td></tr>
      <tr valign="top"><td><tt><tt><span style="color:purple;">void</span></tt></tt> </td>
        <td><a href="XInfoApplication.html#XIsetIconAuthor"><b>setIconAuthor</b></a></td>
        <td><tt>(<tt>const</tt> <tt><span style="color:purple;">char</span></tt>* <tt>const</tt>* <tt><span style="color:blue;">iconData</span></tt>)</tt>;</td></tr>
      <tr valign="top"><td><tt><tt><span style="color:purple;">void</span></tt></tt> </td>
        <td><a href="XInfoApplication.html#XIsetIconProgram"><b>setIconProgram</b></a></td>
        <td><tt>(<tt>const</tt> <tt><span style="color:purple;">char</span></tt>* <tt>const</tt>* <tt><span style="color:blue;">iconData</span></tt>)</tt>;</td></tr>
    </table>
    <hr noshade>
    <h2>Member descriptions</h2>

    <pre><a name="XInfoApplication1"></a> <b>XInfoApplication</b> (const char* pTitle, const char* pPrgInfo, const char* pCopyright)</pre>
    <dl>
      <dd><p>Constructor for program with prg-info in client</p></dd>
      <dd><dl><dt><b>Parameters</b></dt>
          <dd><code>pTitle</code>: Pointer to titlep</dd>
          <dd><code>PrgInfo</code>: Pointer to text describing the application</dd>
          <dd><code>pCopyright</code>: Pointer to copyright-information</dd>
      </dl></dd>
    </dl>
    <hr>
    <pre><a name="~XInfoApplication"></a> <b>~XInfoApplication</b> ()</pre>
    <dl>
      <dd><p>Destructor</p></dd>
    </dl>
    <hr>
    <pre><a name="XIsetIconProgram"></a>void <b>setIconProgram</b> (const char* const* iconData)</pre>
    <dl>
      <dd><p>Sets pixmap for the program</p></dd>
      <dd><dl><dt><b>Parameters</b></dt>
          <dd><code>pIconData</code>: Pointer to xpm-data for pixmap</dd>
      </dl></dd>
    </dl>
    <hr>
    <pre><a name="XIsetIconAuthor"></a>void <b>setIconAuthor</b> (const char* const* iconData)</pre>
    <dl>
      <dd><p>Sets pixmap for the programmer</p></dd>
      <dd><dl><dt><b>Parameters</b></dt>
          <dd><code>pIconData</code>: Pointer to xpm-data for pixmap</dd>
      </dl></dd>
    </dl>

  </body>
</html>