<!-- -*-HTML-*- -->

<!-- $Id: Handle.html,v 1.9 2002/11/30 05:55:59 markus Exp $ -->

<html>
  <head>
    <title>General Reference: IHandle</title>
    <meta name="description" content="Documentation of Handle-classes">
    <meta name="keywords" content="Documentation, Docu, Handle, IHandle, class">

    <meta name="DC.Creator" content="Markus Schwab">
    <meta name="DC.Date" content="2000-04-14">
    <meta name="DC.Rights" content="Anticopyright (A) 2000, distributed under the GNU General Public License">
  </head>

  <body bgcolor="#F0F0F0" text="#000000" link="#0000FF" vlink="#000077" alink="#FF0000">
    <table align="center" border="0" cellspacing="10">
      <tr><td><a href="index.html">Class Index</a></td>
      <td><a href="cross_index.html">Cross Index</a></td></tr>
    </table>

    <h1 align="center">Class IHandle</h1>
    <p>Derived from: <a href="AttrVal.html">AttributValue</a>
      <br>
      Derived by: <a href=Handle.html#Handle>Handle&lt;T&gt;</a></p>

    <p>#include &lt;Handle.h&gt;</p>

    <hr noshade>
    <h2>Description</h2>
    <p>Smart-pointer-class with reference-counting; base-class for type-safe
      classes (defined with template class Handle&lt;T&gt;).</p>

    <p>The object is freed if there are no more references to it.</p>

    <p>As every attribute, handles can be undefined (equivalent to
      NULL-pointers).</p>

    <hr noshade>
    <table border="0">
      <tr><td colspan="3"><h3>public function member index</h3></td></tr>
      <tr valign="top"><td><tt></tt> </td>
        <td><a href="Handle.html#IHandle"><b>IHandle</b></a></td>
        <td><tt>()</tt>;</td></tr>
      <tr valign="top"><td><tt></tt></td>
        <td><a href="Handle.html#IHandle2"><b>IHandle</b></a></td>
        <td><tt>(<tt>const</tt> <a href="Handle.html"><b>IHandle</b></a>&amp; <tt><font color="blue">other</font></tt>)</tt>;</td></tr>
      <tr valign="top"><td><tt><a href="Handle.html"><b>IHandle</b></a>&amp;</tt> </td>
        <td><a href="Handle.html#operator="><tt><font color="black"><b>operator</b></font></tt><tt>=</tt></a></td>
        <td><tt>(<tt>const</tt> <a href="Handle.html"><b>IHandle</b></a>&amp; <tt><font color="blue">other</font></tt>)</tt>;</td></tr>
      <tr valign="top"><td><tt><tt>virtual</tt> <tt><font color="purple">void</font></tt></tt> </td>
        <td><a href="Handle.html#undefine"><b>undefine</b></a></td>
        <td><tt>()</tt>;</td></tr>
      <tr valign="top"><td><tt><tt>virtual</tt> </tt> </td>
        <td><a href="Handle.html#~IHandle"><b>~IHandle</b></a></td>
        <td><tt>()</tt>;</td></tr>

      <tr><td colspan="3"><h3>protected function member index</h3></td></tr>
      <tr valign="top"><td><tt><tt>virtual</tt> <tt><font color="purple">void</font></tt></tt> </td>
        <td><a href="Handle.html#assignValue"><b>assignValue</b></a></td>
        <td><tt>(<tt><font color="purple">void</font></tt>* <tt><font color="blue">pValue</font></tt>)</tt>;</td></tr>
      <tr valign="top"><td><tt><tt>virtual</tt> <tt><font color="purple">void</font></tt></tt> </td>
        <td><a href="Handle.html#create"><b>create</b></a></td>
        <td><tt>(<tt><font color="purple">void</font></tt>* <tt><font color="blue">pValue</font></tt>)</tt>;</td></tr>
        <td><tt>()</tt>;</td></tr>
      <tr valign="top"><td><tt><tt>virtual</tt> <tt><font color="purple">void</font></tt></tt> </td>
        <td><a href="Handle.html#define"><b>define</b></a></td>
        <td><tt>()</tt>;</td></tr>
      <tr valign="top"><td><tt><tt>virtual</tt> <tt><font color="purple">void</font></tt>*</tt> </td>
        <td><a href="Handle.html#getValue"><b>getValue</b></a></td>
        <td><tt>() <tt>const</tt></tt>;</td></tr>
      <tr valign="top"><td><tt><tt>virtual</tt> <tt><font color="purple">void</font></tt></tt> </td>
        <td><a href="Handle.html#link"><b>link</b></a></td>
        <td><tt>()</tt>;</td></tr>
      <tr valign="top"><td><tt><tt><font color="purple">void</font></tt></tt> </td>
        <td><a href="Handle.html#setValue"><b>setValue</b></a></td>
        <td><tt>(<tt><font color="purple">void</font></tt>* <tt><font color="blue">pValue</font></tt>)</tt>;</td></tr>
      <tr valign="top"><td><tt><tt>virtual</tt> <tt><font color="purple">void</font></tt></tt> </td>
        <td><a href="Handle.html#unlink"><b>unlink</b></a></td>
        <td><tt>()</tt>;</td></tr>
    </table>

    <hr noshade>
    <h2>Member descriptions</h2>

    <h3><font color="navy">Management functions</font></h3>
    <pre><a name="IHandle"></a><b>IHandle</b> ()</pre>
    <dl>
      <dd><p>Defaultconstructor; the handle is not defined.</p></dd>
    </dl>
    <hr>
    <pre><a name="IHandle2"></a><b>IHandle</b> (const IHandle&amp; other)</pre>
    <dl>
      <dd><p>Copyconstructor; let's this point to the same object than other. Increases
        the reference count of the object. </p></dd>
      <dd><dl><dt><b>Parameters</b></dt>
          <dd><code>other</code>: Object to assign<dd>
      </dl><dd>
    </dl>
    <hr>
    <pre><a name="~IHandle"></a><b>~IHandle</b> () </pre>
    <dl>
      <dd><p>Destructor</p></dd>
    </dl>
    <hr>
    <pre><a name="operator="></a>IHandle&amp; <b>operator=</b> (const IHandle& other) </pre>
    <dl>
      <dd><p>Assignment operator; both handles points to the same object and the
        reference-counter is increased. The count of the object referenced
        before is decreased.</p></dd>
      <dd><dl><dt><b>Parameters</b></dt>
          <dd><code>other</code>: Object to assign<dd>
      </dl><dd>
    </dl>

    <h3><font color="navy">Handling of the state</font></h3>
    <pre><a name="undefine"></a>void <b>undefine</b> () </pre>
    <dl>
      <dd><p>Undefines the handle; the referenced object is unlinked, if no more
        handles point to this object, it is freed.</p></dd>
    </dl>
    <hr>
    <pre><a name="define"></a>void <b>define</b> () </pre>
    <dl>
      <dd><p>Defines the handle and creates a new object pointed to (with
        reference-count 1).</p></dd>
    </dl>

    <h3><font color="navy">Object-handling</font></h3>
    <pre><a name="create"></a>void <b>create</b> (void* pValue)</pre>
    <dl>
      <dd>Pure virtual method to create the object. Implement in derived
        classes.</dd>
      <dd><dl><dt><b>Parameters</b></dt>
          <dd><code>pValue</code>: Object to manage<dd>
      </dl><dd>
    </dl>
    <hr>
    <pre><a name="link"></a>void <b>link</b> ()</pre>
    <dl>
      <dd><p>Pure virtual method to link the handle to the object pointing to.
        Implement in derived classes.</p></dd>
    </dl>
    <hr>
    <pre><a name="unlink"></a>void <b>unlink</b> ()</pre>
    <dl>
      <dd><p>Pure virtual method to unlink the handle from the object pointing to.
        Implement in derived classes.</p></dd>
    </dl>
    <hr>
    <pre><a name="getValue"></a>void* <b>getValue</b> ()</pre>
    <dl>
      <dd><p>Pure virtual method to access the object pointed to by the handle.
        Implement in derived classes.</p></dd>
      <dd><dl><dt><b>Returns</b></dt>
          <dd>Mangaged object<dd></dl><dd>
    </dl>
    <hr>
    <pre><a name="setValue"></a>void <b>setValue</b> (void* pValue)</pre>
    <dl>
      <dd><p>Method to set the object pointed to by the handle. This method cares
        about the reference count (and unlinks the old and links the new
        object).</p></dd>
      <dd><dl><dt><b>Parameters</b></dt>
          <dd><code>pValue</code>: New value the handle shall manage<dd>
      </dl><dd>
    </dl>
    <hr>
    <pre><a name="assignValue"></a>void <b>assignValue</b> (void* pValue)</pre>
    <dl>
      <dd>Pure virtual method to set the object pointed to by the handle. This
        method does <i>not</i> care about the reference count; use with care
        (or don't use at all!).</dd>
      <dd><dl><dt><b>Parameters</b></dt>
          <dd><code>pValue</code>: New value the handle shall manage<dd>
      </dl><dd>
    </dl>

    <hr noshade>

    <a name="Handle"></a>
    <table align="center" border="0" cellspacing="10">
      <tr><td><a href="index.html">Class Index</a></td>
      <td><a href="cross_index.html">Cross Index</a></td></tr>
    </table>

    <h1 align="center">Class Handle&lt;T&gt;</a></h1>
    <p>Derived from: <a href="Handle.html">IHandle</a>
      <br>
      Derived by: <i>none</i></p>

    <p>#include &lt;Handle.h&gt;</p>

    <hr noshade>
    <h2>Description</h2>
    <p>Typesafe smart-pointer-class with reference-counting.</p>

    <p>The object is freed if there are no more references to it.</p>

    <p>The macro defineHndl(class) can be used to create a type for
      the handle (defined as typedef Handle&lt;class&gt; H##class; defineHndl
      (string) would create a typedef Hstring).</p>

    <p>As every attribute, handles can be undefined (equivalent to
      NULL-pointers).</p>

    <hr noshade>
    <table border="0">
      <tr valign="top"><td colspan="3"><h3>public function member index</h3></td></tr>
      <tr valign="top"><td><tt></tt> </td>
        <td><a href="Handle.html#Handle1"><b>Handle</b></a></td>
        <td><tt>()</tt>;</td></tr>
      <tr valign="top"><td><tt></tt></td>
        <td><a href="Handle.html#Handle2"><b>Handle</b></a></td>
        <td><tt>(<tt><font color="navy">T</font>* <font color="blue">pValue</font></tt>)</tt>;</td></tr>
      <tr valign="top"><td><tt></tt></td>
        <td><a href="Handle.html#Handle3"><b>Handle</b></a></td>
        <td><tt>(<tt>const</tt> <a href="Handle.html#Handle"><b>Handle</b></a>&amp; <tt><font color="blue">other</font></tt>)</tt>;</td></tr>

      <tr valign="top"><td><tt><tt>virtual</tt> </tt> </td>
        <td><a href="Handle.html#~Handle"><b>~Handle</b></a></td>
        <td><tt>()</tt>;</td></tr>

      <tr valign="top"><td><tt><a href="Handle.html#Handle"><b>Handle</b></a>&amp;</tt> </td>
        <td><a href="Handle.html#Hoperator="><tt><font color="black"><b>operator</b></font></tt><tt>=</tt></a></td>
        <td><tt>(<tt>const</tt> <a href="Handle.html#Handle"><b>Handle</b></a>&amp; <tt><font color="blue">other</font></tt>)</tt>;</td></tr>
      <tr valign="top"><td><tt><tt>virtual</tt> <tt><font color="purple">void</font></tt></tt> </td>
        <td><a href="Handle.html#Hdefine"><b>define</b></a></td>
        <td><tt>()</tt>;</td></tr>

      <tr valign="top"><td>&nbsp;</td></tr>
      <tr valign="top"><td colspan="3"><h3>protected function member index</h3></td></tr>
      <tr valign="top"><td><tt><tt>virtual</tt> <tt><font color="purple">void</font></tt></tt> </td>
        <td><a href="Handle.html#HassignValue"><b>assignValue</b></a></td>
        <td><tt>(<tt><font color="purple">void</font></tt>* <tt><font color="blue">pValue</font></tt>)</tt>;</td></tr>
      <tr valign="top"><td><tt><tt>virtual</tt> <tt><font color="purple">void</font></tt></tt> </td>
        <td><a href="Handle.html#Hcreate"><b>create</b></a></td>
        <td><tt>(<tt><font color="purple">void</font></tt>* <tt><font color="blue">pValue</font></tt>)</tt>;</td></tr>
      <tr valign="top"><td><tt><tt>virtual</tt> <tt><font color="purple">void</font></tt>*</tt> </td>
        <td><a href="Handle.html#HgetValue"><b>getValue</b></a></td>
        <td><tt>() <tt>const</tt></tt>;</td></tr>
      <tr valign="top"><td><tt><tt>virtual</tt> <tt><font color="purple">void</font></tt></tt> </td>
        <td><a href="Handle.html#Hlink"><b>link</b></a></td>
        <td><tt>()</tt>;</td></tr>
      <tr valign="top"><td><tt><tt>virtual</tt> <tt><font color="purple">void</font></tt></tt> </td>
        <td><a href="Handle.html#Hunlink"><b>unlink</b></a></td>
        <td><tt>()</tt>;</td></tr>
    </table>

    <hr noshade>
    <h2>Member descriptions</h2>

    <h3><font color="navy">Management functions</font></h3>
    <pre><a name="Handle1"></a><b>Handle</b> ()</pre>
    <dl>
      <dd><p>Defaultconstructor; the handle is not defined</p></dd>
    </dl>
    <hr>
    <pre><a name="Handle2"></a><b>Handle</b> (T* pValue)</pre>
    <dl>
      <dd><p>Constructor which lets the handle point to the passed object. The
        handle is defined and the reference-count is set to 1.</p></dd>
      <dd><dl><dt><b>Parameters</b></dt>
          <dd><code>pValue</code>: New value the handle shall manage<dd>
      </dl><dd>
    </dl>
    <hr>
    <pre><a name="Handle3"></a><b>Handle</b> (const Handle&amp; other)</pre>
    <dl>
      <dd><p>Copy-constructor; both handles points to the same object. The
        reference-count of the object (if any) is increased.</p></dd>
      <dd><dl><dt><b>Parameters</b></dt>
          <dd><code>other</code>: Object to assign<dd>
      </dl><dd>
    </dl>
    <hr>
    <pre><a name="~Handle"></a><b>~Handle</b> ()</pre>
    <dl>
      <dd><p>Destructor; decrements the reference-count of the object pointed to
        (and frees it if the reference-count reaches 0).</p></dd>
    </dl>
    <hr>
    <pre><a name="Hoperator="></a>Handle&amp; <b>operator=</b> (const Handle&amp; other)</pre>
    <dl>
      <dd><p>Assignmentoperator; unlinks this from the object pointed to and links
        it to the object pointed to by other (both handles points to the same
        object). This operation decreases the reference-count of the old and
        increases the one of the new object. The old object is freed, if no
        other handle accesses it.</p></dd>
      <dd><dl><dt><b>Parameters</b></dt>
          <dd><code>other</code>: Object to assign<dd>
      </dl><dd>
      <dd><dl><dt><b>Returns</b></dt>
          <dd>Reference to self<dd></dl><dd>
    </dl>
    </dl>
    <hr>
    <pre><a name="Hdefine"></a>void <b>define</b> ()</pre>
    <dl>
      <dd><p>Defines the handle and creates a new object pointed to (with
        reference-count 1). If an already defined handle is defined again, its
        old object is released (and freed if the reference-count becomes 0)
        and a new object is assigned.</p></dd>
    </dl>

    <h3><font color="navy">Accessing the object</font></h3>
    <pre><a name="Hoperator-g"></a>T* <b>operator-&gt;</b> () const</pre>
    <dl>
      <dd><p>Returns a pointer to the referenced object.</p></dd>
      <dd><dl><dt><b>Returns</b></dt>
          <dd>Pointer to the referenced object<dd></dl><dd>
    </dl>
    <hr>
    <pre><a name="Hoperator*"></a>T* <b>operator*</b> () const</pre>
    <dl>
      <dd><p>Returns a pointer to the referenced object.</p></dd>
      <dd><dl><dt><b>Returns</b></dt>
          <dd>Pointer to the referenced object<dd></dl><dd>
    </dl>
    <hr>
    <pre><a name="HoperatorT*"></a><b>operator T*</b> () const</pre>
    <dl>
      <dd><p>Returns a pointer to the referenced object.</p></dd>
      <dd><dl><dt><b>Returns</b></dt>
          <dd>Pointer to the referenced object<dd></dl><dd>
    </dl>

    <h3><font color="navy">Object-handling</font></h3>
    <pre><a name="Hcreate"></a>void <b>create</b> (void* pValue)</pre>
    <dl>
      <dd><p>Method to create a reference-couting object to the object specified
        by pValue. The reference-count is set to 1.</p></dd>
      <dd><dl><dt><b>Parameters</b></dt>
          <dd><code>pValue</code>: Object to manage<dd>
      </dl><dd>
    </dl>
    <hr>
    <pre><a name="Hlink"></a>void <b>link</b> ()</pre>
    <dl>
      <dd><p>Method to link the handle to the object pointing to. The
        reference-count is increased.</p></dd>
    </dl>
    <hr>
    <pre><a name="Hunlink"></a>void <b>unlink</b> ()</pre>
    <dl>
      <dd><p>Method to unlink the handle from the object pointing to. The
        reference-count is decreased.</p></dd>
    </dl>
    <hr>
    <pre><a name="HgetValue"></a>void* <b>getValue</b> () const</pre>
    <dl>
      <dd><p>Method to access the object pointed to by the handle.</p></dd>
      <dd><dl><dt><b>Returns</b></dt>
          <dd><code>void*</code>: Managed object<dd>
      </dl><dd>
    </dl>
    <hr>
    <pre><a name="HassignValue"></a>void <b>assignValue</b> (void* pValue)</pre>
    <dl>
      <dd>Method to set the object pointed to by the handle. This method does
        <i>not</i> care about the reference count; use with care (or don't use
        at all!).</dd>
      <dd><dl><dt><b>Parameters</b></dt>
          <dd><code>pValue</code>: Object to manage<dd>
      </dl><dd>
    </dl>

    <hr noshade>

    <a name="RefCount"></a>
    <table align="center" border="0" cellspacing="10">
      <tr><td><a href="index.html">Class Index</a></td>
        <td><a href="cross_index.html">Cross Index</a></td></tr>
    </table>

    <h1 align="center">Class RefCount&lt;T&gt;</h1>
    <p>Derived from: <i>none</i>
      <br>
      Derived by: <i>none</i></p>

    <p>#include &lt;Handle.h&gt;</p>

    <hr noshade>
    <h2>Description</h2>
    <p>Object-pointer with reference-counter.</p>

    <p>The class gives the opportunity to link and unlink to and from an
      object. If no more object is linked, the object destroys itself and the
      referenced object.</p>

    <hr noshade>
    <table border="0">
      <tr valign="top"><td colspan="3"><h3>public function member index</h3></td></tr>
      <tr valign="top"><td><tt></tt></td>
        <td><a href="Handle.html#RefCount1"><b>RefCount</b></a></td>
        <td><tt>(<font color="navy">T</font>* <font color="blue">pData</font> = NULL)</tt>;</td></tr>
      <tr valign="top"><td><tt><tt>virtual</tt> </tt> </td>
        <td><a href="Handle.html#~RefCount"><b>~RefCount</b></a></td>
        <td><tt>()</tt>;</td></tr>

      <tr valign="top"><td><tt>void</tt></td>
        <td><a href="Handle.html#Rlink"><b>link</b></a></td>
        <td><tt>()</tt>;</td></tr>
      <tr valign="top"><td><tt>void</tt></td>
        <td><a href="Handle.html#Runlink"><b>unlink</b></a></td>
        <td><tt>()</tt>;</td></tr>
    </table>

    <hr noshade>
    <h2>Member descriptions</h2>

    <h3><font color="navy">Mangement functions</font></h3>
    <pre><a name="RefCount1"></a><b>RefCount</b> (T* pValue)</pre>
    <dl>
      <dd><p>Defaultconstructor; creates a reference-couting object pointing to
        pValue and sets the reference-count to 1.</p></dd>
      <dd><dl><dt><b>Parameters</b></dt>
          <dd><code>pValue</code>: New value to manage<dd></dl></dd>
    </dl>
    <hr>
    <pre><a name="~RefCount"></a><b>~RefCount</b> ()</pre>
    <dl>
      <dd><p>Destructor; deletes also the handled object</p></dd>
    </dl>
    <h3><font color="navy">Object-handling</font></h3>
    <pre><a name="Rlink"></a>void <b>link</b> ()</pre>
    <dl>
      <dd><p>Increments the reference-counter.</p></dd>
    </dl>
    <hr>
    <pre><a name="Runlink"></a>void <b>unlink</b> ()</pre>
    <dl>
      <dd><p>Decrements the reference-counter. If the counter reaches zero, this
         and its referenced object are freed.</p></dd>
    </dl>
  </body>
</html>
