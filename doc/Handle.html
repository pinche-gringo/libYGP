<!-- $Id: Handle.html,v 1.6 2001/09/19 23:48:07 markus Exp $ -->

<html>
  <head>
    <title>General Reference: IHandle</title>
    <meta name="description" content="Documentation of Handle-classes">
    <meta name="keywords" content="Documentation, Docu, Handle, IHandle, class">

    <meta name="DC.Creator" content="Markus Schwab">
    <meta name="DC.Date" content="2000-04-14">
    <meta name="DC.Rights" content="Anticopyright (A) 2000, distributed under the GNU General Public License">
  </head>

  <body bgcolor="#F0F0F0" text="#000000" link="#0000FF" vlink="#000077" alink="#FF0000">
    <table align=center border=0 cellspacing=10>
      <tr><td><a href="index.html">Class Index</a></td>
      <td><a href="cross_index.html">Cross Index</a></td></tr>
    </table>

    <h1 align="center">Class IHandle</h1>
    <p>Derived from: <a href="AttrVal.html">AttributValue</a>
      <br>
      Derived by: <a href=Handle.html#Handle>Handle&lt;T&gt;</a></p>

    <p>#include &lt;Handle.h&gt;</p>

    <hr noshade>
    <h2>Description</h2>
    <p>Smart-pointer-class with reference-counting; base-class for type-safe
      classes (defined with template class Handle&lt;T&gt;).</p>

    <p>The object is freed if there is no more reference to it.</p>

    <p>As every attribute, handles can be undefined (equivalent to
      NULL-pointers.</p>

    <hr noshade>
    <table border="0">
      <tr><td colspan="3"><h3>public function member index</h3></td></tr>
      <tr valign="top"><td><tt></tt> </td>
        <td><a href="Handle.html#IHandle"><b>IHandle</b></a></td>
        <td><tt>()</tt>;</td></tr>
      <tr valign="top"><td><tt></tt></td>
        <td><a href="Handle.html#IHandle2"><b>IHandle</b></a></td>
        <td><tt>(<tt>const</tt> <a href="Handle.html"><b>IHandle</b></a>&amp; <tt><font color="blue">other</font></tt>)</tt>;</td></tr>
      <tr valign="top"><td><tt><a href="Handle.html"><b>IHandle</b></a>&amp;</tt> </td>
        <td><a href="Handle.html#operator="><tt><font color="black"><b>operator</b></font></tt><tt>=</tt></a></td>
        <td><tt>(<tt>const</tt> <a href="Handle.html"><b>IHandle</b></a>&amp; <tt><font color="blue">other</font></tt>)</tt>;</td></tr>
      <tr valign="top"><td><tt><tt>virtual</tt> <tt><font color="purple">void</font></tt></tt> </td>
        <td><a href="Handle.html#undefine"><b>undefine</b></a></td>
        <td><tt>()</tt>;</td></tr>
      <tr valign="top"><td><tt><tt>virtual</tt> </tt> </td>
        <td><a href="Handle.html#~IHandle"><b>~IHandle</b></a></td>
        <td><tt>()</tt>;</td></tr>

      <tr><td colspan="3"><h3>protected function member index</h3></td></tr>
      <tr valign="top"><td><tt><tt>virtual</tt> <tt><font color="purple">void</font></tt></tt> </td>
        <td><a href="Handle.html#assignValue"><b>assignValue</b></a></td>
        <td><tt>(<tt><font color="purple">void</font></tt>* <tt><font color="blue">pValue</font></tt>)</tt>;</td></tr>
      <tr valign="top"><td><tt><tt>virtual</tt> <tt><font color="purple">void</font></tt></tt> </td>
        <td><a href="Handle.html#create"><b>create</b></a></td>
        <td><tt>(<tt><font color="purple">void</font></tt>* <tt><font color="blue">pValue</font></tt>)</tt>;</td></tr>
        <td><tt>()</tt>;</td></tr>
      <tr valign="top"><td><tt><tt>virtual</tt> <tt><font color="purple">void</font></tt></tt> </td>
        <td><a href="Handle.html#define"><b>define</b></a></td>
        <td><tt>()</tt>;</td></tr>
      <tr valign="top"><td><tt><tt>virtual</tt> <tt><font color="purple">void</font></tt>*</tt> </td>
        <td><a href="Handle.html#getValue"><b>getValue</b></a></td>
        <td><tt>() <tt>const</tt></tt>;</td></tr>
      <tr valign="top"><td><tt><tt>virtual</tt> <tt><font color="purple">void</font></tt></tt> </td>
        <td><a href="Handle.html#link"><b>link</b></a></td>
        <td><tt>()</tt>;</td></tr>
      <tr valign="top"><td><tt><tt><font color="purple">void</font></tt></tt> </td>
        <td><a href="Handle.html#setValue"><b>setValue</b></a></td>
        <td><tt>(<tt><font color="purple">void</font></tt>* <tt><font color="blue">pValue</font></tt>)</tt>;</td></tr>
      <tr valign="top"><td><tt><tt>virtual</tt> <tt><font color="purple">void</font></tt></tt> </td>
        <td><a href="Handle.html#unlink"><b>unlink</b></a></td>
        <td><tt>()</tt>;</td></tr>
    </table>

    <hr noshade>
    <h2>Member descriptions</h2>

    <h4>Management functions</h4>
    <pre><a name="IHandle"></a>IHandle ()</pre>
    <dl>
      <dd>Defaultconstructor; the handle is not defined.</dd>
    </dl>
    <pre><a name="IHandle2"></a>IHandle (const IHandle&amp; other)</pre>
    <pre><a name="~IHandle"></a>~IHandle ()</pre>

    <pre><a name="operator="></a>IHandle&amp; operator= (const IHandle&amp; other)</pre>
    <dl>
      <dd>Assignmentoperator; both handles points to the same object and the
        reference-counter is increased. The count of the object referenced
        before is decreased.</dd>
    </dl>

    <h4>Handling of the state</h4>
    <pre><a name="undefine"></a>virtual void undefine ()</pre>
    <dl>
      <dd>Undefines the	handle; the referenced object is unlinked, if no more
        handles point to this object, it is freed.</dd>
    </dl>

    <pre><a name="define"></a>virtual void define () = 0</pre>
    <dl>
      <dd>Defines the handle and creates a new object pointed to (with
        reference-count 1).</dd>
    </dl>

    <h4>Object-handling</h4>
    <pre><a name="create"></a>virtual void create (void* pValue) = 0</pre>
    <dl>
      <dd>Pure virtual method to create the object. Implement in derived
        classes.</dd>
    </dl>

    <pre><a name="link"></a>virtual void link () = 0</pre>
    <dl>
      <dd>Pure virtual method to link the handle to the object pointing to.
        Implement in derived classes.</dd>
    </dl>

    <pre><a name="unlink"></a>virtual void unlink () = 0</pre>
    <dl>
      <dd>Pure virtual method to unlink the handle from the object pointing to.
        Implement in derived classes.</dd>
    </dl>

    <pre><a name="getValue"></a>virtual void* getValue () = 0</pre>
    <dl>
      <dd>Pure virtual method to access the object pointed to by the handle.
        Implement in derived classes.</dd>
    </dl>

    <pre><a name="setValue"></a>void setValue (void* pValue)</pre>
    <dl>
      <dd>Method to set the object pointed to by the handle. This method cares
        about the reference count (and unlinks the old and links the new
        object).</dd>
    </dl>

    <pre><a name="assignValue"></a>virtual void assignValue (void* pValue) = 0</pre>
    <dl>
      <dd>Pure virtual method to set the object pointed to by the handle. This
        method does <i>not</i> care about the reference count; use with care
        (or don't use at all!).</dd>
    </dl>

    <hr noshade>

    <a name="Handle"></a>
    <table align="center" border="0" cellspacing="10">
      <tr><td><a href="index.html">Class Index</a></td>
      <td><a href="cross_index.html">Cross Index</a></td></tr>
    </table>

    <h1 align="center">Class Handle&lt;T&gt;</a></h1>
    <p>Derived from: <a href="Handle.html">IHandle</a>
      <br>
      Derived by: <i>none</i></p>

    <p>#include &lt;Handle.h&gt;</p>

    <hr noshade>
    <h2>Description</h2>
    <p>Typesafe smart-pointer-class with reference-counting.</p>

    <p>The object is freed if there is no more reference to it.</p>

    <p>The macro defineHndl(class) can be used to create a type for
      the handle (defined as typedef Handle&lt;class&gt; H##class; defineHndl
      (string) would create a typedef Hstring).</p>

    <p>As every attribute, handles can be undefined (equivalent to
      NULL-pointers.</p>

    <hr noshade>
    <table border="0">
      <tr valign="top"><td colspan="3"><h3>public function member index</h3></td></tr>
      <tr valign="top"><td><tt></tt> </td>
        <td><a href="Handle.html#Handle1"><b>Handle</b></a></td>
        <td><tt>()</tt>;</td></tr>
      <tr valign="top"><td><tt></tt></td>
        <td><a href="Handle.html#Handle2"><b>Handle</b></a></td>
        <td><tt>(<tt><font color="navy">T</font>* <font color="blue">pValue</font></tt>)</tt>;</td></tr>
      <tr valign="top"><td><tt></tt></td>
        <td><a href="Handle.html#Handle3"><b>Handle</b></a></td>
        <td><tt>(<tt>const</tt> <a href="Handle.html#Handle"><b>Handle</b></a>&amp; <tt><font color="blue">other</font></tt>)</tt>;</td></tr>

      <tr valign="top"><td><tt><tt>virtual</tt> </tt> </td>
        <td><a href="Handle.html#~Handle"><b>~Handle</b></a></td>
        <td><tt>()</tt>;</td></tr>

      <tr valign="top"><td><tt><a href="Handle.html#Handle"><b>Handle</b></a>&amp;</tt> </td>
        <td><a href="Handle.html#Hoperator="><tt><font color="black"><b>operator</b></font></tt><tt>=</tt></a></td>
        <td><tt>(<tt>const</tt> <a href="Handle.html#Handle"><b>Handle</b></a>&amp; <tt><font color="blue">other</font></tt>)</tt>;</td></tr>
      <tr valign="top"><td><tt><tt>virtual</tt> <tt><font color="purple">void</font></tt></tt> </td>
        <td><a href="Handle.html#Hdefine"><b>define</b></a></td>
        <td><tt>()</tt>;</td></tr>

      <tr valign="top"><td>&nbsp;</td></tr>
      <tr valign="top"><td colspan="3"><h3>protected function member index</h3></td></tr>
      <tr valign="top"><td><tt><tt>virtual</tt> <tt><font color="purple">void</font></tt></tt> </td>
        <td><a href="Handle.html#HassignValue"><b>assignValue</b></a></td>
        <td><tt>(<tt><font color="purple">void</font></tt>* <tt><font color="blue">pValue</font></tt>)</tt>;</td></tr>
      <tr valign="top"><td><tt><tt>virtual</tt> <tt><font color="purple">void</font></tt></tt> </td>
        <td><a href="Handle.html#Hcreate"><b>create</b></a></td>
        <td><tt>(<tt><font color="purple">void</font></tt>* <tt><font color="blue">pValue</font></tt>)</tt>;</td></tr>
      <tr valign="top"><td><tt><tt>virtual</tt> <tt><font color="purple">void</font></tt>*</tt> </td>
        <td><a href="Handle.html#HgetValue"><b>getValue</b></a></td>
        <td><tt>() <tt>const</tt></tt>;</td></tr>
      <tr valign="top"><td><tt><tt>virtual</tt> <tt><font color="purple">void</font></tt></tt> </td>
        <td><a href="Handle.html#Hlink"><b>link</b></a></td>
        <td><tt>()</tt>;</td></tr>
      <tr valign="top"><td><tt><tt>virtual</tt> <tt><font color="purple">void</font></tt></tt> </td>
        <td><a href="Handle.html#Hunlink"><b>unlink</b></a></td>
        <td><tt>()</tt>;</td></tr>
    </table>

    <hr noshade>
    <h2>Member descriptions</h2>

    <h4>Management functions</h4>
    <pre><a name="Handle1"></a>Handle ()</pre>
    <dl>
      <dd>Defaultconstructor; the handle is not defined</dd>
    </dl>
    <pre><a name="Handle2"></a>Handle (T* pValue)</pre>
    <dl>
      <dd>Constructor which lets the handle point to the passed object. The
        handle is defined and the reference-count is set to 1.</dd>
    </dl>
    <pre><a name="Handle3"></a>Handle (const Handle&amp; other)</pre>
    <dl>
      <dd>Copy-constructor; both handles points to the same object. The
        reference-count of the object (if any) is increased.</dd>
    </dl>

    <pre><a name="~Handle"></a>~Handle ()</pre>
    <dl>
      <dd>Destructor; decrements the reference-count of the object pointed to
        (and frees it if the reference-count reaches 0).</dd>
    </dl>

    <pre><a name="Hoperator="></a>Handle&amp; operator= (const Handle&amp; other)</pre>
    <dl>
      <dd>Assignmentoperator; unlinks this from the object pointed to and links
        it to the object pointed to by other (both handles points to the same
        object). This operation decreases the reference-count of the old and
        increases the one of the new object. The old object is freed, if no
        other handle accesses it.</dd>
    </dl>

    <pre><a name="Hdefine"></a>virtual void define ()</pre>
    <dl>
      <dd>Defines the handle and creates a new object pointed to (with
        reference-count 1). If an already defined handle is defined again, its
        old object is released (and freed if the reference-count becomes 0)
        and a new object is assigned.</dd>
    </dl>

    <h4>Accessing the object</h4>
    <pre><a name="Hoperator-g"></a>T* operator-&gt; () const</pre>
    <dl>
      <dd>Returns a pointer to the referenced object.</dd>
    </dl>
    <pre><a name="Hoperator*"></a>T* operator* () const</pre>
    <dl>
      <dd>Returns a pointer to the referenced object.</dd>
    </dl>
    <pre><a name="HoperatorT*"></a>operatorT* () const</pre>
    <dl>
      <dd>Returns a pointer to the referenced object.</dd>
    </dl>

    <h4>Object-handling</h4>
    <pre><a name="Hcreate"></a>virtual void create (void* pValue)</pre>
    <dl>
      <dd>Method to create a reference-couting object to the object specified
        by pValue. The reference-count is set to 1.</dd>
    </dl>

    <pre><a name="Hlink"></a>virtual void link ()</pre>
    <dl>
      <dd>Method to link the handle to the object pointing to. The
        reference-count is increased.</dd>
    </dl>

    <pre><a name="Hunlink"></a>virtual void unlink ()</pre>
    <dl>
      <dd>Method to unlink the handle from the object pointing to. The
        reference-count is decreased.</dd>
    </dl>

    <pre><a name="HgetValue"></a>virtual void* getValue () const</pre>
    <dl>
      <dd>Method to access the object pointed to by the handle.</dd>
    </dl>

    <pre><a name="HassignValue"></a>virtual void assignValue (void* pValue)</pre>
    <dl>
      <dd>Method to set the object pointed to by the handle. This method does
        <i>not</i> care about the reference count; use with care (or don't use
        at all!).</dd>
    </dl>

    <hr noshade>

    <a name="RefCount"></a>
    <table align="center" border="0" cellspacing="10">
      <tr><td><a href="index.html">Class Index</a></td>
        <td><a href="cross_index.html">Cross Index</a></td></tr>
    </table>

    <h1 align="center">Class RefCount&lt;T&gt;</h1>
    <p>Derived from: <i>none</i>
      <br>
      Derived by: <i>none</i></p>

    <p>#include &lt;Handle.h&gt;</p>

    <hr noshade>
    <h2>Description</h2>
    <p>Object-pointer with reference-counter.</p>

    <p>The class gives the opportunity to link and unlink to and from an
      object. If no more object is linked, the object destroys itself and the
      referenced object.</p>

    <hr noshade>
    <table border="0">
      <tr valign="top"><td colspan="3"><h3>public function member index</h3></td></tr>
      <tr valign="top"><td><tt></tt></td>
        <td><a href="Handle.html#RefCount1"><b>RefCount</b></a></td>
        <td><tt>(<font color="navy">T</font>* <font color="blue">pData</font> = NULL)</tt>;</td></tr>
      <tr valign="top"><td><tt><tt>virtual</tt> </tt> </td>
        <td><a href="Handle.html#~RefCount"><b>~RefCount</b></a></td>
        <td><tt>()</tt>;</td></tr>

      <tr valign="top"><td><tt>void</tt></td>
        <td><a href="Handle.html#Rlink"><b>link</b></a></td>
        <td><tt>()</tt>;</td></tr>
      <tr valign="top"><td><tt>void</tt></td>
        <td><a href="Handle.html#Runlink"><b>unlink</b></a></td>
        <td><tt>()</tt>;</td></tr>
    </table>

    <hr noshade>
    <h2>Member descriptions</h2>

    <h4>Mangement functions</h4>
    <pre><a name="RefCount1"></a>RefCount (T* pValue)</pre>
    <dl>
      <dd>Defaultconstructor; creates a reference-couting object pointing to
        pValue and sets the reference-count to 1.</dd>
    </dl>

    <pre><a name="~RefCount"></a>~RefCount ()</pre>

    <h4>Object-handling</h4>
    <pre><a name="Rlink"></a>void link ()</pre>
    <dl>
      <dd>Increments reference-counter.</dd>
    </dl>

    <pre><a name="Runlink"></a>void unlink ()</pre>
    <dl>
      <dd>Decrements the reference-counter. If the counter reaches zero, this
         its referenced object are freed.</dd>
    </dl>
  </body>
</html>
