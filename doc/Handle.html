<!-- $Id: Handle.html,v 1.4 2000/04/15 02:05:25 Markus Rel $ -->

<html>
  <head>
    <title>General Reference: IHandle</title>
    <meta name="description" content="Documentation of Handle-class">
    <meta name="keywords" content="Documentation, Docu, Handle, class">

    <meta name="DC.Creator" content="Markus Schwab">
    <meta name="DC.Date" content="2000-04-14">
    <meta name="DC.Rights" content="Anticopyright (A) 2000, distributed under the GNU General Public License">
  </head>

  <body>
    <table align="center" border="0" cellspacing="10">
      <tr><td><a href="index.html">Class Index</a></td></tr>
    </table>

    <h1 align="center">Class IHandle</h1>
    <p>Derived from: <a href="AttrVal.html">AttributValue</a></p>

    <p>Header-file: Handle.h</p>

    <hr noshade>
    <h2>Description</h2>
    <p>Smart-pointer-class with reference-counting; base-class for type-safe
      classes (defined with template class Handle&lt;T&gt;).</p>

    <p>The object is freed if there is no more reference to it.</p>

    <p>As every attribute, handles can be undefined (equivalent to
      NULL-pointers.</p>

    <hr noshade>
    <table border="0">
      <tr valign="top"><td colspan="3"><h3>public member index</h3></td></tr>
      <tr valign="top"><td></td><td><a href="Handle.html#IHandle">IHandle</a></td><td>()</td></tr>
      <tr valign="top"><td></td><td><a href="Handle.html#IHandle2">IHandle</a></td>
        <td>(const <a href="Handle.html">IHandle</a>&amp; other)</td></tr>
      <tr valign="top"><td>virtual</td>
        <td><a href="Handle.html#~IHandle">~IHandle</a></td><td>()</td></tr>

      <tr valign="top"><td><a href="Handle.html">IHandle</a>&amp;</td>
        <td><a href="Handle.html#operator=">operator=</a></td>
        <td>(const <a href="Handle.html">IHandle</a>&amp; other)</td></tr>

      <tr valign="top"><td>virtual void</td>
        <td><a href="Handle.html#undefine">undefine</a></td><td>()</td></tr>

      <tr valign="top"><td>&nbsp;</td></tr>
      <tr valign="top"><td colspan="3"><h3>protected member index</h3></td></tr>
      <tr valign="top"><td>virtual void</td>
        <td><a href="Handle.html#create">create</a></td><td>(void* pValue)</td></tr>
      <tr valign="top"><td>virtual void</td>
        <td><a href="Handle.html#link">link</a></td><td>()</td></tr>
      <tr valign="top"><td>virtual void</td>
        <td><a href="Handle.html#unlink">unlink</a></td><td>()</td></tr>
      <tr valign="top"><td>virtual void*</td>
        <td><a href="Handle.html#getValue">getValue</a></td><td>() const = 0</td></tr>
      <tr valign="top"><td>void</td>
        <td><a href="Handle.html#setValue">setValue</a></td><td>(void* pValue)</td></tr>
      <tr valign="top"><td>virtual void</td>
        <td><a href="Handle.html#assignValue">assignValue</a></td><td>(void* pValue) = 0</td></tr>

      <tr valign="top"><td>virtual void</td>
        <td><a href="Handle.html#define">define</a></td><td>() = 0</td></tr>
    </table>

    <hr noshade>
    <h2>Member descriptions</h2>

    <h4>Management functions</h4>
    <pre><a name="IHandle"></a>IHandle ()</pre>
    <dl>
      <dd>Defaultconstructor; the handle is not defined.</dd>
    </dl>
    <pre><a name="IHandle2"></a>IHandle (const IHandle&amp; other)</pre>
    <pre><a name="~IHandle"></a>~IHandle ()</pre>

    <pre><a name="operator="></a>IHandle&amp; operator= (const IHandle&amp; other)</pre>
    <dl>
      <dd>Assignmentoperator; both handles points to the same object and the
        reference-counter is increased. The count of the object referenced
        before is decreased.</dd>
    </dl>

    <h4>Handling of the state</h4>
    <pre><a name="undefine"></a>virtual void undefine ()</pre>
    <dl>
      <dd>Undefines the	handle; the referenced object is unlinked, if no more
        handles point to this object, it is freed.</dd>
    </dl>

    <pre><a name="define"></a>virtual void define () = 0</pre>
    <dl>
      <dd>Defines the handle and creates a new object pointed to (with
        reference-count 1).</dd>
    </dl>

    <h4>Object-handling</h4>
    <pre><a name="create"></a>virtual void create (void* pValue) = 0</pre>
    <dl>
      <dd>Pure virtual method to create the object. Implement in derived
        classes.</dd>
    </dl>

    <pre><a name="link"></a>virtual void link () = 0</pre>
    <dl>
      <dd>Pure virtual method to link the handle to the object pointing to.
        Implement in derived classes.</dd>
    </dl>

    <pre><a name="unlink"></a>virtual void unlink () = 0</pre>
    <dl>
      <dd>Pure virtual method to unlink the handle from the object pointing to.
        Implement in derived classes.</dd>
    </dl>

    <pre><a name="getValue"></a>virtual void* getValue () = 0</pre>
    <dl>
      <dd>Pure virtual method to access the object pointed to by the handle.
        Implement in derived classes.</dd>
    </dl>

    <pre><a name="setValue"></a>void setValue (void* pValue)</pre>
    <dl>
      <dd>Method to set the object pointed to by the handle. This method cares
        about the reference count (and unlinks the old and links the new
        object).</dd>
    </dl>

    <pre><a name="assignValue"></a>virtual void assignValue (void* pValue) = 0</pre>
    <dl>
      <dd>Pure virtual method to set the object pointed to by the handle. This
        method does <i>not</i> care about the reference count; use with care
        (or don't use at all!).</dd>
    </dl>

    <hr noshade>

    <table align="center" border="0" cellspacing="10">
      <tr><td><a href="index.html">Class Index</a></td></tr>
    </table>

    <h1 align="center"><a name="Handle">Class Handle&lt;T&gt;</a></h1>
    <p>Derived from: <a href="Handle.html">IHandle</a></p>

    <p>Header-file: Handle.h</p>

    <hr noshade>
    <h2>Description</h2>
    <p>Typesafe smart-pointer-class with reference-counting.</p>

    <p>The object is freed if there is no more reference to it.</p>

    <p>The macro defineHndl(class) can be used to create a type for
      the handle (defined as typedef Handle&lt;class&gt; H##class; defineHndl
      (string) would create a typedef Hstring).</p>

    <p>As every attribute, handles can be undefined (equivalent to
      NULL-pointers.</p>

    <hr noshade>
    <table border="0">
      <tr valign="top"><td colspan="3"><h3>public member index</h3></td></tr>
      <tr valign="top"><td></td><td><a href="Handle.html#Handle1">Handle</a></td><td>()</td></tr>
      <tr valign="top"><td></td><td><a href="Handle.html#Handle2">Handle</a></td>
        <td>(T* pValue)</td></tr>
      <tr valign="top"><td></td><td><a href="Handle.html#Handle3">Handle</a></td>
        <td>(const <a href="Handle.html#Handle">Handle</a>&amp;)</td></tr>
      <tr valign="top"><td>virtual</td>
        <td><a href="Handle.html#~Handle">~Handle</a></td><td>()</td></tr>

      <tr valign="top"><td><a href="Handle.html#Handle">Handle</a>&amp;</td>
        <td><a href="Handle.html#operator=">operator=</a></td>
        <td>(const <a href="Handle.html#Handle">Handle</a>&amp; other)</td></tr>

      <tr valign="top"><td>virtual void</td>
        <td><a href="Handle.html#define">define</a></td><td>()</td></tr>

      <tr valign="top"><td>T*</td>
        <td><a href="Handle.html#operator-g">operator-&gt;</a></td>
        <td>() const</td></tr>
      <tr valign="top"><td>T*</td>
        <td><a href="Handle.html#operator*">operator*</a></td>
        <td>() const</td></tr>
      <tr valign="top"><td></td>
        <td><a href="Handle.html#operatorT*">operator T*</a></td>
        <td>() const</td></tr>

      <tr valign="top"><td>&nbsp;</td></tr>
      <tr valign="top"><td colspan="3"><h3>protected member index</h3></td></tr>
      <tr valign="top"><td>virtual void</td>
        <td><a href="Handle.html#Hcreate">create</a></td><td>(void* pValue)</td></tr>
      <tr valign="top"><td>virtual void</td>
        <td><a href="Handle.html#Hlink">link</a></td><td>()</td></tr>
      <tr valign="top"><td>virtual void</td>
        <td><a href="Handle.html#Hunlink">unlink</a></td><td>()</td></tr>
      <tr valign="top"><td>virtual void*</td>
        <td><a href="Handle.html#HgetValue">getValue</a></td><td>() const</td></tr>
      <tr valign="top"><td>void</td>
        <td><a href="Handle.html#HsetValue">setValue</a></td><td>(void* pValue)</td></tr>
      <tr valign="top"><td>virtual void</td>
        <td><a href="Handle.html#HassignValue">assignValue</a></td><td>(void* pValue)</td></tr>
    </table>

    <hr noshade>
    <h2>Member descriptions</h2>

    <h4>Management functions</h4>
    <pre><a name="Handle1"></a>Handle ()</pre>
    <dl>
      <dd>Defaultconstructor; the handle is not defined</dd>
    </dl>
    <pre><a name="Handle2"></a>Handle (T* pValue)</pre>
    <dl>
      <dd>Constructor which lets the handle point to the passed object. The
        handle is defined and the reference-count is set to 1.</dd>
    </dl>
    <pre><a name="Handle3"></a>Handle (const Handle&amp; other)</pre>
    <dl>
      <dd>Copy-constructor; both handles points to the same object. The
        reference-count of the object (if any) is increased.</dd>
    </dl>

    <pre><a name="~Handle"></a>~Handle ()</pre>
    <dl>
      <dd>Destructor; decrements the reference-count of the object pointed to
        (and frees it if the reference-count reaches 0).</dd>
    </dl>

    <pre><a name="Hoperator="></a>Handle&amp; operator= (const Handle&amp; other)</pre>
    <dl>
      <dd>Assignmentoperator; unlinks this from the object pointed to and links
        it to the object pointed to by other (both handles points to the same
        object). This operation decreases the reference-count of the old and
        increases the one of the new object. The old object is freed, if no
        other handle accesses it.</dd>
    </dl>

    <pre><a name="Hdefine"></a>virtual void define () = 0</pre>
    <dl>
      <dd>Defines the handle and creates a new object pointed to (with
        reference-count 1). If an already defined handle is defined again, its
        old object is released (and freed if the reference-count becomes 0)
        and a new object is assigned.</dd>
    </dl>

    <h4>Accessing the object</h4>
    <pre><a name="operator-g"></a>T* operator-&gt; () const</pre>
    <dl>
      <dd>Returns a pointer to the referenced object.</dd>
    </dl>
    <pre><a name="operator*"></a>T* operator* () const</pre>
    <dl>
      <dd>Returns a pointer to the referenced object.</dd>
    </dl>
    <pre><a name="operatorT*"></a>T* operatorT* () const</pre>
    <dl>
      <dd>Returns a pointer to the referenced object.</dd>
    </dl>

    <h4>Object-handling</h4>
    <pre><a name="Hcreate"></a>virtual void create (void* pValue)</pre>
    <dl>
      <dd>Method to create a reference-couting object to the object specified
        by pValue. The reference-count is set to 1.</dd>
    </dl>

    <pre><a name="Hlink"></a>virtual void link ()</pre>
    <dl>
      <dd>Method to link the handle to the object pointing to. The
        reference-count is increased.</dd>
    </dl>

    <pre><a name="Hunlink"></a>virtual void unlink ()</pre>
    <dl>
      <dd>Method to unlink the handle from the object pointing to. The
        reference-count is decreased.</dd>
    </dl>

    <pre><a name="HgetValue"></a>virtual void* getValue ()</pre>
    <dl>
      <dd>Method to access the object pointed to by the handle.</dd>
    </dl>

    <pre><a name="HassignValue"></a>virtual void assignValue (void* pValue)</pre>
    <dl>
      <dd>Method to set the object pointed to by the handle. This method does
        <i>not</i> care about the reference count; use with care (or don't use
        at all!).</dd>
    </dl>

    <hr noshade>

    <table align="center" border="0" cellspacing="10">
      <tr><td><a href="index.html">Class Index</a></td></tr>
    </table>

    <h1 align="center"><a name="RefCount"></a>Class RefCount&lt;T&gt;</h1>
    <p>Derived from: <i>None</i></p>

    <p>Header-file: Handle.h</p>

    <hr noshade>
    <h2>Description</h2>
    <p>Object-pointer with reference-counter.</p>

    <p>The class gives the opportunity to link and unlink to and from an
      object. If no more object is linked, the object destroys itself and the
      referenced object.</p>

    <hr noshade>
    <table border="0">
      <tr valign="top"><td colspan="3"><h3>public member index</h3></td></tr>
      <tr valign="top"><td></td><td><a href="Handle.html#RefCount">RefCount</a></td>
        <td>(T* pData = NULL)</td></tr>
      <tr valign="top"><td></td><td><a href="Handle.html#~RefCount">~RefCount</a></td>
        <td>()</td></tr>

      <tr valign="top"><td>void</td><td><a href="Handle.html#Rlink">link</a></td>
        <td>()</td></tr>
      <tr valign="top"><td>void</td><td><a href="Handle.html#Runlink">unlink</a></td>
        <td>()</td></tr>
    </table>

    <h4>Mangement functions</h4>
    <pre><a name="RefCount"></a>RefCount (T* pValue)</pre>
    <dl>
      <dd>Defaultconstructor; creates a reference-couting object pointing to
        pValue and sets the reference-count to 1.</dd>
    </dl>

    <pre><a name="~RefCount"></a>~RefCount ()</pre>

    <h4>Object-handling</h4>
    <pre><a name="Rlink"></a>void link ()</pre>
    <dl>
      <dd>Increments reference-counter.</dd>
    </dl>

    <pre><a name="Runlink"></a>void unlink ()</pre>
    <dl>
      <dd>Decrements the reference-counter. If the counter reaches zero, this
         its referenced object are freed.</dd>
    </dl>
  </body>
</html>
