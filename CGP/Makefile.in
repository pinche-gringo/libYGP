# $Id: Makefile.in,v 1.3 2001/01/19 14:41:33 Markus Exp $

# Copyright (C) 1994, 1995-8, 1999 Free Software Foundation, Inc.
# This Makefile.in is free software; the Free Software Foundation
# gives unlimited permission to copy and/or distribute it,
# with or without modifications, as long as this notice is preserved.

# This program is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY, to the extent permitted by law; without
# even the implied warranty of MERCHANTABILITY or FITNESS FOR A
# PARTICULAR PURPOSE.

SHELL = @SHELL@

prefix = @prefix@
exec_prefix = @exec_prefix@

top_srcdir =  @top_srcdir@
top_builddir = ..

subdir=CORBA

DESTDIR=

libdir = @libdir@
includedir = @includedir@

AS = @AS@
CC = @CC@
CPP = @CPP@
CXX = @CXX@

INSTALL = @INSTALL@
INSTALL_PROGRAM = @INSTALL_PROGRAM@ $(AM_INSTALL_PROGRAM_FLAGS)
INSTALL_DATA = @INSTALL_DATA@
INSTALL_SCRIPT = @INSTALL_SCRIPT@
mkinstalldirs = $(SHELL) $(top_srcdir)/mkinstalldirs

MAKEINFO = @MAKEINFO@
PACKAGE = @PACKAGE@
RELEASE = @RELEASE@
VERSION = @VERSION@

INCLUDES =  -I. -I$(top_srcdir) -I$(top_srcdir)/Common
DEFS = @DEFS@
CXXFLAGS = @CXXFLAGS@
CXXCOMPILE = $(CXX) $(DEFS) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) $(AM_CXXFLAGS) $(CXXFLAGS)

LIBS=-lmico -lAttr

CORBACOMPILE = mico-shc++
CORBALINK = mico-shld

HEADER_TARGETS=CDirSrch.h
LIB_TARGETS=@CORBA_TARGETS@
OBJECTS=CDirSrch.o CIDirSrch.o

.SUFFIXES: .cc .cpp .lo .o .idl

.idl.cc:
	idl $<
.cc.o:
	$(CORBACOMPILE) -c $(INCLUDES) $<
.cpp.o:
	$(CORBACOMPILE) -c  $(INCLUDES) $<

all: Makefile $(LIB_TARGETS)

libCAttr.a: $(OBJECTS)
	$(CORBALINK) $(LIBS) $(OBJECTS) -o libCAttr

Makefile: Makefile.in $(top_builddir)/config.status
	cd $(top_builddir) \
	  && CONFIG_FILES=$(subdir)/$@ CONFIG_HEADERS= $(SHELL) ./config.status

install:
	$(mkinstalldirs) $(DESTDIR)$(libdir)
	@list='$(LIB_TARGETS)'; for p in $$list; do \
	  if test -f $$p; then \
	    $(INSTALL) $$p $(DESTDIR)$(libdir)/$$p; \
	  fi; \
	done
	$(mkinstalldirs) $(DESTDIR)$(includedir)
	@list='$(HEADER_TARGETS)'; for p in $$list; do \
	  if test -f "$$p"; then d= ; else d="$(srcdir)/"; fi; \
	  $(INSTALL_DATA) $$d$$p $(DESTDIR)$(includedir)/$$p; \
	done

clean:
	@list='$(LIB_TARGETS)'; for p in $$list; do \
	  if test -f "$$p"; then \
	     rm -f $$p; \
	  fi; \
	done
	rm -f *.o core *.core;
	@list=`ls *.idl`; \
	for i in $$list; do \
	   rm -f $${i%.*}.cc $${i%.*}.h; \
	done
